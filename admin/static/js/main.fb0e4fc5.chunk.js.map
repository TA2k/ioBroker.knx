{"version":3,"sources":["Tools/Projectupload.js","Components/LicensePopupWindow.js","Components/StyledDropZone.js","Tabs/Configuration.js","Components/GaProps.js","Components/GaList.js","Components/GaStateAct.js","Components/GaLinkedState.js","Tabs/GaTools.js","App.js","serviceWorker.js","index.js"],"names":["extractXml","str","m","match","obj","i","length","parts","split","substring","splitObj","splitFile","a","hasOwnProperty","splitPart","Object","keys","splitSlice","pcs","count","b","sendObject","socket","instance","callback","_devId","attrs","pos","indexOf","splice","unshift","DeviceId","sendTo","file","prop","then","result","error","console","setTimeout","sendFiles","deviceFiles","_resolve","Promise","resolve","id","log","deviceFilesA","unzipAsync","getPassword","extractedData","reader","window","zip","ZipReader","BlobReader","getEntries","entries","exitValidationFile","filename","getData","TextWriter","res","DOMParser","parseFromString","getElementsByTagName","getAttribute","data","push","endsWith","startsWith","password","BlobWriter","targetBlob","nestedReader","nestedFiles","crypto","pbkdf2Sync","Buffer","from","toString","nestedFile","catch","err","I18n","t","title","text","visible","close","_extractData","devicesFilesE","key","cb","start","Date","now","doc","dev","xmlnSpace","profiling","name","deviceId","comObjectTableM","comObjectTable","start1","c","ob","Id","Text","Name","Number","FunctionText","ObjectSize","read","ReadFlag","write","WriteFlag","transmit","TransmitFlag","communicate","CommunicationFlag","update","UpdateFlag","readOnInit","ReadOnInitFlag","dpt","DatapointType","comObjectRefsM","comObjectRefs","cc","obb","RefId","Dpt","ComObjectTable","ComObjectRefs","parseM","devComObjectTableTrans","devComObjectRefsTrans","devComObjectTable","devComObjectRefs","outerHTML","extractData","knx_master","xml0E","knx_masterE","xml0","comObjRefs","coRxml0","replace","parse0XML","files","props","options","setProgressState","setImportState","undefined","warn","size","useWebWorkers","connected","onlyAddNewObjects","Error","numberOfGA","fileImport","styles","makeStyles","theme","root","margin","padding","spacing","closeButton","position","right","top","color","palette","grey","dialogWindow","fullWidth","maxWidth","table","minWidth","fontSize","AddLicensePopup","classes","licensing","useState","disabledSave","setDisabledSave","showSyncDialog","setShowSyncDialog","login","setLogin","setPassword","validatedLicenses","setValidatedLicenses","showLicenseChooseDialog","setShowLicenseChooseDialog","showErrorDialog","setShowErrorDialog","showErrorDialogMessage","setShowErrorDialogMessage","refPassword","React","useRef","handleClose","onChange","useEffect","handleChange","Array","isArray","licenses","json","value","fetchLicenses","fetch","headers","Authorization","btoa","lics","promises","nr","license","all","message","errorDialog","Dialog","open","DialogTitle","DialogContent","DialogActions","Button","variant","onClick","iconStart","licenseChooseDialog","TableContainer","component","Paper","Table","className","aria-label","TableHead","TableRow","TableCell","style","align","TableBody","map","lic","hover","expiration","getDate","getMonth","getFullYear","getHours","getMinutes","getSeconds","datapoints","majorVersion","sysUUID","syncDialog","TextField","autoFocus","e","target","label","onKeyUp","keyCode","current","focus","inputRef","type","onClose","aria-labelledby","disableTypography","IconButton","dividers","Grid","container","multiline","rows","defaultValue","flex","startIcon","disabled","baseStyle","display","flexDirection","alignItems","borderWidth","borderRadius","borderColor","borderStyle","backgroundColor","outline","transition","width","StyledDropZone","onDrop","accept","multiple","getRootProps","getInputProps","textField","input","alertBar","progress","height","tab","marginRight","marginLeft","card","controlElement","Configuration","instanceAlive","passwordDialogOKButton","setPasswordDialogOKButton","isInstanceAlive","setIsInstanceAlive","setSysUUID","numberOfDPTs","setNumberOfDPTs","progressState","ipList","setIpList","setOptions","offlineLicense","numberOfInstances","registeredTo","licenseVerification","setLicenseVerification","passwordDialogVisible","setPasswordDialogVisible","addLicensePopupVisible","disableSaveButton","showPopup","setShowPopup","native","valid","permissions","setLicensing","finished","numberOfDevices","devices","attr","importState","getUuid","uuid","getForeignObjects","adapterName","ga","getHostByIp","common","host","ips","filter","item","family","address","checkLicense","val","checkIpAddress","ipAdr","fileCallback","fromDropzone","expires","getTime","renderInput","eibAdr","pass","port","portNr","parseInt","isNaN","isInteger","checkPort","frameInterval","frameInt","checkFrameInterval","helperText","reject","document","getElementById","addEventListener","evt","pw","licVerification","showPasswordDialog","autoComplete","showImportState","addLicenseOnChange","onError","setState","errorText","onLoad","justifyContent","xs","Card","CardContent","Typography","gutterBottom","marginright","FormControl","InputLabel","Select","bind","MenuItem","debugLevel","FormControlLabel","control","Checkbox","checked","event","old","marginTop","Box","sx","LinearProgress","Alert","severity","hostUUID","GaProps","gaObjArr","dptObjs","trwuChecked","dptObj","setDPTObj","rwuChecked","setrwuChecked","selectedDPT","setSelectedDPT","gaObjArray","setGaObjArray","gaObj","setGaObj","_id","setChecked","trwu","handlePropsClick","rwuPropTemp","updateChecked","readChecked","writeChecked","tgaObjArray","cnt","minHeight","List","ListItem","ListItemIcon","edge","tabIndex","disableRipple","inputProps","ListItemText","secondary","htmlFor","tdpt","dpTemp","getDPTfromDPTObject","unit","handlePropsChange","DPT_Name","TreeItem","propTypes","bgColor","PropTypes","string","labelIcon","elementType","labelIconColor","labelInfo","labelText","useTreeItemStyles","action","content","borderTopRightRadius","borderBottomRightRadius","paddingRight","fontWeight","typography","fontWeightMedium","fontWeightRegular","group","paddingLeft","expanded","selected","labelRoot","flexGrow","StyledTreeItem","other","GaList","gaObjects","multiselect","gaObject","setGAObject","TreeView","defaultExpanded","defaultCollapseIcon","defaultExpandIcon","defaultEndIcon","multiSelect","onNodeSelect","handleMultiSelect","hg","nodeId","hgId","hgName","AppsIcon","mg","mgId","mgName","g","gaId","gaName","object","isRequired","array","actObject","stateObject","func","GaStateAct","gaRefIdMap","actObj","setActObj","stateObj","setStateObj","setGAObj","showGaListDialog","setShowGaListDialog","gaListDialogOKButtonDisabled","setGaListDialogOKButtonDisabled","gaListReturn","setGaListReturn","messageText","setMessageText","tGa","tGaCommon","tGaNative","actGARefId","getObject","statusGARefId","showMessage","getHelperText","gaListDialog","stateId","actId","direction","InputProps","readOnly","CardActionArea","CardActions","delete","linkedState","GaLinkedState","iobObjects","setIobObjects","showIobObjectsDialog","setShowIobObjectsDialog","iobListDialogOKButtonDisabled","setIobListDialogOKButtonDisabled","lastSelectedItem","setLastSelectedItem","getIobObjects","tObjObject","iobObj","iobObjSplit","iobObjectBrowser","handleIobObjectClick","levelOne","levelTwo","levelThree","levelFour","levelFive","levelSix","getGaObject","struct","gaGaIdMap","gaActStateMap","gaStateActMap","gaUndefMap","forEach","gt","adr","nameSplit","addressRefId","createData","GaTools","setGaObjects","refIdMap","setRefIdMap","setGaObjArr","getDPTs","syncGAActState","handleClick","tArr","deniedObjNameArr","_cnt","_tArr","index","addGAActState","deleteGAActState","modifyGALinkedState","getDPTObj","setObject","objArr","updateDPT","objID","range","max","min","statObj","modified","p","bgcolor","gridTemplateColumns","md","gap","maxHeight","overflow","App","extendedProps","encryptedFields","translations","require","updateAliveState","this","licenseValid","selectedTab","socketConnected","unsubscribeState","newState","includes","state","getState","subscribeState","loaded","background","default","primary","AppBar","Tabs","getSelectedTab","selectTab","parentNode","dataset","scrollButtons","Tab","data-name","isIFrame","tabContentIFrame","tabContent","onLoadConfig","changed","updateNativeValue","onShowError","showError","renderError","renderSaveCloseButtons","themeType","GenericApp","withStyles","Boolean","location","hostname","themeName","Utils","getThemeName","version","Sentry","dsn","release","integrations","SentryIntegrations","build","ReactDOM","render","onThemeChange","_theme","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.fb0e4fc5.chunk.js","sourcesContent":["import I18n from '@iobroker/adapter-react/i18n';\r\nimport crypto from 'crypto';\r\n\r\nfunction extractXml(str) {\r\n    // <ComObject Id=\"M-0008_A-10D5-11-F6FC-O000A_O-0\" FunctionText=\"Schalten\" Name=\"Taste 1\" Number=\"0\" ObjectSize=\"2 Bytes\" Priority=\"Low\" CommunicationFlag=\"Enabled\" ReadFlag=\"Disabled\" ReadOnInitFlag=\"Disabled\" TransmitFlag=\"Enabled\" UpdateFlag=\"Disabled\" WriteFlag=\"Enabled\" Text=\"Taste 1\" />`\r\n    const m = str.match(/(\\w+=\"[^\"]*)\"/g);\r\n    if (!m) return {};\r\n    const obj = {};\r\n    for (let i = 0; i < m.length; i++) {\r\n        const parts = m[i].split('=');\r\n        obj[parts[0]] = parts[1] ? parts[1].substring(1, parts[1].length - 1) : '';\r\n    }\r\n    return obj;\r\n}\r\n\r\nfunction parse0XML(xml0) {\r\n    const comObjRefs = {};\r\n    const coRxml0 = xml0.match(/<ComObjectInstanceRef\\s[^>]+\\/>/g);\r\n    if (coRxml0) {\r\n        for (let a = 0; a < coRxml0.length; a++) {\r\n            const ob = extractXml(coRxml0[a]);\r\n            comObjRefs[ob.RefId] = ob.RefId.replace(/_O-.*/, '');\r\n        }\r\n    }\r\n    return comObjRefs;\r\n}\r\n\r\nfunction parseM(str, profiling) {\r\n    let name = str.match(/<ApplicationProgram\\s.*Name=\"([^\"]*)\"/);\r\n    if (name) {\r\n        name = name[1];\r\n    } else {\r\n        name = null;\r\n    }\r\n    let deviceId = str.match(/<ApplicationProgram\\s.*Id=\"([^\"]*)\"/);\r\n    if (deviceId) {\r\n        deviceId = deviceId[1];\r\n    } else {\r\n        deviceId = null;\r\n    }\r\n    const comObjectTableM = str.match(/<ComObject\\s[^>]+\\/>/g);\r\n    const comObjectTable = {};\r\n    if (comObjectTableM) {\r\n        let start1 = Date.now();\r\n        let start;\r\n        profiling && console.log('Extracting ' + comObjectTableM.length);\r\n        for (let c = 0; c < comObjectTableM.length; c++) {\r\n            if (profiling) {\r\n                start = Date.now();\r\n            }\r\n            const ob = extractXml(comObjectTableM[c]);\r\n            comObjectTable[ob.Id] = {\r\n                Text: ob.Text,\r\n                Name: ob.Name,\r\n                Number: ob.Number,\r\n                FunctionText: ob.FunctionText,\r\n                ObjectSize: ob.ObjectSize,\r\n                read: ob.ReadFlag,\r\n                write: ob.WriteFlag,\r\n                transmit: ob.TransmitFlag,\r\n                communicate: ob.CommunicationFlag,\r\n                update: ob.UpdateFlag,\r\n                readOnInit: ob.ReadOnInitFlag,\r\n                dpt: ob.DatapointType\r\n            };\r\n        }\r\n        profiling && console.log(`Extracting2 ${Date.now() - start1}`);\r\n    }\r\n\r\n    const comObjectRefsM = str.match(/<ComObjectRef\\s[^>]+\\/>/g);\r\n    const comObjectRefs = {};\r\n    if (comObjectRefsM) {\r\n        profiling && console.log('Extracting3 ' + comObjectRefsM.length);\r\n        let start1 = Date.now();\r\n        let start;\r\n        for (let cc = 0; cc < comObjectRefsM.length; cc++) {\r\n            const obb = extractXml(comObjectRefsM[cc]);\r\n            comObjectRefs[obb.Id] = {\r\n                Text: obb.Text || '',\r\n                Name: obb.Name || '',\r\n                FunctionText: obb.FunctionText || '',\r\n                RefId: obb.RefId,\r\n                ObjectSize: obb.ObjectSize || null,\r\n                read: obb.ReadFlag || null,\r\n                write: obb.WriteFlag || null,\r\n                transmit: obb.TransmitFlag || null,\r\n                Dpt: obb.DatapointType || null\r\n            };\r\n        }\r\n        profiling && console.log(`Extracting4 ${Date.now() - start1}`);\r\n    }\r\n\r\n    return {\r\n        Name: name,//file[key].Name,\r\n        DeviceId: deviceId,//file[key].DeviceId,\r\n        ComObjectTable: comObjectTable,//new dom().parseFromString(file[key].ComObjectTable, 'text/xml'),\r\n        ComObjectRefs: comObjectRefs//new dom().parseFromString(file[key].ComObjectRefs, 'text/xml')\r\n        //  DevParameterBlock: new dom().parseFromString(file[key].DevParameterBlock, 'text/xml')\r\n    };\r\n}\r\n\r\nfunction splitObj(obj) {\r\n    //  console.log(len);\r\n    const splitFile = {};\r\n    for (const a in obj) {\r\n        if (!obj.hasOwnProperty(a)) {\r\n            continue;\r\n        }\r\n        if (typeof obj[a] === 'string') {\r\n            splitFile[a] = obj[a];\r\n        } else {\r\n            const splitPart = obj[a];\r\n            const splitPartLength = Object.keys(splitPart).length;\r\n            if (splitPartLength < 10000) {\r\n                splitFile[a] = splitPart;\r\n            } else {\r\n                let splitSlice = {};\r\n                let pcs = 0;\r\n                let count = 0;\r\n                for (const b in splitPart) {\r\n                    if (!splitPart.hasOwnProperty(b)) {\r\n                        continue;\r\n                    }\r\n                    splitSlice[b] = splitPart[b];\r\n                    if (count < 10000) {\r\n                        count++;\r\n                    } else {\r\n                        splitFile[a + '.' + pcs] = splitSlice;\r\n                        count = 0;\r\n                        pcs++;\r\n                        splitSlice = {};\r\n                    }\r\n                }\r\n                if (count) {\r\n                    splitFile[a + '.' + pcs] = splitSlice;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return splitFile;\r\n}\r\n\r\nfunction sendObject(socket, instance, obj, callback, _devId) {\r\n    const attrs = Object.keys(obj);\r\n    const pos = attrs.indexOf('DeviceId');\r\n    if (pos !== -1 && pos !== 0) {\r\n        attrs.splice(pos, 1);\r\n        attrs.unshift('DeviceId');\r\n    }\r\n    _devId = _devId || obj.DeviceId;\r\n\r\n    for (let b = 0; b < attrs.length; b++) {\r\n        if (obj[attrs[b]] !== null) {\r\n            //    obj[attrs[b]] = null;\r\n            return socket.sendTo('knx.' + instance, 'projectDeviceFile', {file: obj[attrs[b]], prop: attrs[b]})\r\n                .then(result => {\r\n                    if (!result || result.error) {\r\n                        //showMessage(_('Error: ') + (result ? result.error : _('Unknown')));\r\n                    } else {\r\n                        if (result.DeviceId !== _devId) {\r\n                            console.error('Warning object was saved under invalid deviceid ' + result.DeviceId + ' !== ' + _devId);\r\n                        }\r\n                        obj[attrs[b]] = null;\r\n                        setTimeout(() =>\r\n                            sendObject(socket, instance, obj, callback, _devId), 0);\r\n                    }\r\n                });\r\n        }\r\n    }\r\n    callback();\r\n}\r\n\r\nfunction sendFiles(socket, instance, deviceFiles, _resolve) {\r\n    if (!_resolve) {\r\n        return new Promise(resolve => sendFiles(socket, instance, deviceFiles, resolve));\r\n    }\r\n    for (const id in deviceFiles) {\r\n        if (!deviceFiles.hasOwnProperty(id)) {\r\n            continue;\r\n        }\r\n        if (deviceFiles[id]) {\r\n            //\r\n            console.log('Device: ' + id);\r\n\r\n            const deviceFilesA = splitObj(deviceFiles[id]);\r\n            deviceFiles[id] = null;\r\n\r\n            return sendObject(socket, instance, deviceFilesA, () =>\r\n                setTimeout(() => sendFiles(socket, instance, deviceFiles, _resolve), 0));\r\n        }\r\n    }\r\n    _resolve();\r\n}\r\n\r\nasync function unzipAsync(file, getPassword) {\r\n    const extractedData = {\r\n        'xml0E': '',\r\n        'knx_masterE': '',\r\n        'projectE': '',\r\n        'devicesFilesE': [],\r\n        'error': ''\r\n    };\r\n    // create a BlobReader to read with a ZipReader the zip from a Blob object\r\n    const reader = new window.zip.ZipReader(new window.zip.BlobReader(file));\r\n    // get all entries from the zip\r\n    const entries = await reader.getEntries();\r\n    let exitValidationFile = false;\r\n    for (let file of entries) {\r\n        //console.log(file.filename);\r\n        if (file.filename === 'knx_master.xml') {\r\n            extractedData['knx_masterE'] = await file.getData(new window.zip.TextWriter())\r\n                .then(res => {\r\n                    const dom = new DOMParser();\r\n                    const doc = dom.parseFromString(res, 'text/xml');\r\n                    const version = doc.getElementsByTagName(\"KNX\")[0].getAttribute(\"xmlns\");\r\n                    if (version === \"http://knx.org/xml/project/21\") {\r\n                        exitValidationFile = true;\r\n                    }\r\n                    return res;\r\n                });\r\n        }\r\n        if (file.filename === 'project.xml') {\r\n            extractedData['projectE'] = await file.getData(new window.zip.TextWriter())\r\n                .then(res => res);\r\n        }\r\n        if (file.filename.match(/\\/0\\.xml$/)) {\r\n            extractedData['xml0E'] = await file.getData(new window.zip.TextWriter())\r\n                .then(res => res);\r\n        }\r\n        if (file.filename.match(/\\/M.*\\.xml$/)) {\r\n            extractedData['devicesFilesE'].push(await file.getData(new window.zip.TextWriter())\r\n                .then(res => {\r\n                    return {filename: file.filename, data: res}\r\n                }));\r\n        }\r\n        if (file.filename.match('.validation')) {\r\n            // this is since ETS6 and so use encoded password in case of protected knxproj\r\n            exitValidationFile = true;\r\n        }\r\n\r\n        if (file.filename.endsWith('.zip') && file.filename.startsWith('P-') && !file.filename.startsWith('/')) {\r\n            // request Password\r\n            //console.log(\" > Decrypting...\");\r\n            await getPassword()\r\n                .then(async password => {\r\n                    const targetBlob = await file.getData(new window.zip.BlobWriter());\r\n                    // create a BlobReader to read with a ZipReader the zip from a Blob object\r\n                    const nestedReader = await new window.zip.ZipReader(await new window.zip.BlobReader(await targetBlob));\r\n                    // get all entries from the zip\r\n                    const nestedFiles = await nestedReader.getEntries();\r\n\r\n                    if (exitValidationFile === true) {\r\n                        password = crypto\r\n                            .pbkdf2Sync(\r\n                                Buffer.from(password, 'utf16le'),\r\n                                Buffer.from('21.project.ets.knx.org', 'ascii'),\r\n                                65536,\r\n                                32,\r\n                                'sha256'\r\n                            )\r\n                            .toString('base64');\r\n                    }\r\n\r\n                    for (let nestedFile of nestedFiles) {\r\n                        // console.log('decrypted : ' + nestedFile.filename);\r\n                        if (nestedFile.filename.match(/0\\.xml$/)) {\r\n                            extractedData['xml0E'] = await nestedFile.getData(new window.zip.TextWriter(), {password: password})\r\n                                .then(res => res)\r\n                                .catch(err => {\r\n                                    extractedData['error'] = I18n.t('wrong Password');\r\n                                });\r\n                        }\r\n                        if (nestedFile.filename.match(/\\/M.*\\.xml$/)) {\r\n                            extractedData['devicesFilesE'].push(await nestedFile.getData(new window.zip.TextWriter(), {password: password})\r\n                                .then(res => {\r\n                                    extractedData['error'] = I18n.t('wrong Password');\r\n                                })\r\n                                .catch(err => {\r\n                                    return {title: 'importerror', text: I18n.t('Invalid Password'), visible: true};\r\n                                }));\r\n                        }\r\n                        if (nestedFile.filename === 'project.xml') {\r\n                            extractedData['projectE'] = await nestedFile.getData(new window.zip.TextWriter(), {password: password})\r\n                                .then(res => res)\r\n                                .catch(err => {\r\n                                    extractedData['error'] = 'wrong Password';\r\n                                });\r\n                        }\r\n                        if (nestedFile.filename === 'knx_master.xml') {\r\n                            extractedData['knx_masterE'] = await nestedFile.getData(new window.zip.TextWriter(), {password: password})\r\n                                .then(res => res)\r\n                                .catch(err => {\r\n                                    extractedData['error'] = 'wrong Password';\r\n                                });\r\n                        }\r\n                    }\r\n                    await nestedReader.close();\r\n                });\r\n        }\r\n    }\r\n\r\n    await reader.close();\r\n    return extractedData;\r\n}\r\n\r\nfunction _extractData(devicesFilesE, deviceFiles, key, cb) {\r\n    if (key < devicesFilesE.length) {\r\n        const start = Date.now();\r\n        const filename = devicesFilesE[key].filename;\r\n        const dom = new DOMParser();\r\n        const doc = dom.parseFromString(devicesFilesE[key].data, 'text/xml');\r\n        const dev = doc.getElementsByTagName('ApplicationProgram')[0].getAttribute('Id');\r\n        const xmlnSpace = doc.getElementsByTagName('KNX')[0].getAttribute('xmlns');\r\n\r\n        if (filename.match(/\\/M/)) {\r\n            deviceFiles[dev] = parseM(devicesFilesE[key].data, key === 36);\r\n        } else {\r\n            let devComObjectTableTrans = {};\r\n            let devComObjectRefsTrans = {};\r\n            const devComObjectTable = doc.getElementsByTagName('ComObjectTable')[0];\r\n            const devComObjectRefs = doc.getElementsByTagName('ComObjectRefs')[0];\r\n            // const devParameterBlock = doc.getElementsByTagName(\"Dynamic\")[0];\r\n\r\n            if (devComObjectTable && typeof devComObjectTable === 'object') {\r\n                devComObjectTableTrans = devComObjectTable.outerHTML;\r\n                //     alert(devComObjectTable.outerHTML);\r\n            } else {\r\n                // devComObjectTableTrans = '<ComObjectTable xmlns=\"http://knx.org/xml/project/13\">\\n </ComObjectTable>';\r\n                devComObjectTableTrans = '<ComObjectTable xmlns=\"' + xmlnSpace + '\">\\n </ComObjectTable>';\r\n                //    alert(' unklare ComObjectsTables in : ' + dev);\r\n            }\r\n\r\n            if (devComObjectRefs && typeof devComObjectRefs === 'object') {\r\n                devComObjectRefsTrans = devComObjectRefs.outerHTML;\r\n            } else {\r\n                //devComObjectRefsTrans = '<ComObjectRefs xmlns=\"http://knx.org/xml/project/13\">\\n </ComObjectRefs>';\r\n                devComObjectRefsTrans = `<ComObjectRefs xmlns=\"${xmlnSpace}\">\\n </ComObjectRefs>`;\r\n                //    alert(' unklare ComObjectsRefs in : ' + dev);\r\n            }\r\n            deviceFiles[dev] = {\r\n                Name: doc.getElementsByTagName('ApplicationProgram')[0].getAttribute('Name'),\r\n                DeviceId: dev,\r\n                ComObjectTable: devComObjectTableTrans,\r\n                ComObjectRefs: devComObjectRefsTrans\r\n                //       DevParameterBlock: devParameterBlock.outerHTML\r\n            };\r\n        }\r\n        console.log(`Processed ${key} in ${Date.now() - start}ms`);\r\n        setTimeout(() => _extractData(devicesFilesE, deviceFiles, key + 1, cb), 100);\r\n    } else {\r\n        cb(deviceFiles);\r\n    }\r\n}\r\n\r\nfunction extractData(entries) {\r\n    let xml0E = entries['xml0E'] || '';\r\n    let knx_masterE = entries['knx_masterE'] || '';\r\n    const devicesFilesE = entries['devicesFilesE'] || [];\r\n    // let projectE = entries['projectE'] || '';\r\n    const deviceFiles = {};\r\n\r\n    if (xml0E.length > 0) {\r\n        parse0XML(xml0E);\r\n    }\r\n\r\n    let knx_master;\r\n    if (knx_masterE.length > 0) {\r\n        knx_master = knx_masterE;\r\n    }\r\n\r\n    return new Promise(resolve => _extractData(devicesFilesE, deviceFiles, 0, deviceFiles => {\r\n        resolve({xml0: xml0E, deviceFiles, knx_master});\r\n    }));\r\n}\r\n\r\nasync function fileImport(files, props, options, setProgressState, setImportState, getPassword) {\r\n    const socket = props.socket;\r\n    const instance = props.instance;\r\n    let file = files !== undefined && files[0] ? files[0] : null;\r\n    /*\r\n        const myPingPong = setInterval(pingPong, 1000);\r\n\r\n        function pingPong() {\r\n            socket.sendTo('knx.' + instance, 'ping', null)\r\n                .then(res => {\r\n                    console.log(res);\r\n                });\r\n        };\r\n    */\r\n\r\n    if (!file) {\r\n        console.warn('invalid file object');\r\n        // 2do Warnmessage\r\n        return false;\r\n    }\r\n\r\n    if (file.size > 100000000) {\r\n        console.log('File is too big!');\r\n        // 2do Warnmassage\r\n        return false;\r\n    }\r\n    console.log('file upload start');\r\n\r\n    window.zip.useWebWorkers = false;\r\n\r\n    let entries;\r\n    try {\r\n        entries = await unzipAsync(file, getPassword);\r\n    } catch (error) {\r\n        setImportState({title: 'importerror', error: error, visible: true});\r\n        return false;\r\n    }\r\n\r\n    if (entries['error'].length > 0) {\r\n        setImportState({title: 'importerror', error: entries['error'], visible: true});\r\n    } else {\r\n        const {knx_master, xml0, deviceFiles} = await extractData(entries);\r\n\r\n        try {\r\n            console.log('Please wait while generating Objects.....it could take a while.');\r\n            console.warn('socket conntected : ' + socket.connected);\r\n            const res = await socket.sendTo('knx.' + instance, 'options', {'onlyAddNewObjects': options.onlyAddNewObjects});\r\n            console.log(res);\r\n\r\n            setProgressState(15);\r\n            let result = await socket.sendTo('knx.' + instance, 'projectStart', {'name': 'test'});\r\n            if (result.error) {\r\n                console.error('Projektstart: ' + (result ? result.error : 'Unknown'));\r\n                throw new Error(result.error);\r\n            }\r\n            setProgressState(33);\r\n            result = await socket.sendTo('knx.' + instance, 'projectXml0', {xml0});\r\n            if (!result || result.error) {\r\n                console.error('projektXml0: ' + result ? result.error : 'Unknown');\r\n                throw new Error(result.error);\r\n            }\r\n            setProgressState(65);\r\n            result = await socket.sendTo('knx.' + instance, 'projectKnxMaster', {knx_master});\r\n            if (!result || result.error) {\r\n                console.error(`projectKnxMaster: ${result ? result.error : 'Unknown'}`);\r\n                throw new Error(result.error);\r\n            }\r\n            setProgressState(90);\r\n            await sendFiles(socket, instance, deviceFiles);\r\n            result = await socket.sendTo('knx.' + instance, 'projectFinished', null);\r\n            console.log(`projectFinished: ${result ? result.error : 'Unknown'}`);\r\n            if (!result || result.error) {\r\n                setImportState({\r\n                    title: 'importerror',\r\n                    error: result.error,\r\n                    numberOfGA: result.count,\r\n                    visible: true\r\n                });\r\n                //  showMessage(_('Error: ') + (result ? result.error : _('Unknown')));\r\n            } else {\r\n                console.error(`Finished ... Extracted: ${result.count}`);\r\n\r\n                setProgressState(100);\r\n\r\n                setImportState({title: 'importresult', numberOfGA: result.count, visible: true});\r\n\r\n                await socket.sendTo('knx.' + instance, 'reload');\r\n            }\r\n        } catch (error) {\r\n            console.error('Cannot parse: ' + error);\r\n            setImportState({title: 'importerror', text: 'error ' + error, visible: true});\r\n        }\r\n    }\r\n}\r\n\r\nexport default fileImport;\r\n","import React, {useEffect, useState} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {makeStyles} from '@material-ui/core/styles';\r\nimport {\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogTitle,\r\n    IconButton,\r\n    TextField,\r\n    TableContainer,\r\n    Table,\r\n    TableHead,\r\n    TableRow,\r\n    TableCell,\r\n    TableBody,\r\n    Paper,\r\n    Grid,\r\n    CardContent,\r\n    CardActions,\r\n    Card\r\n} from \"@material-ui/core\";\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport IconSync from '@material-ui/icons/Refresh';\r\nimport IconCheck from '@material-ui/icons/Check';\r\nimport IconCancel from '@material-ui/icons/Cancel';\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nconst styles = makeStyles(theme => ({\r\n    root: {\r\n        margin: 0,\r\n        padding: theme.spacing(2)\r\n    },\r\n    closeButton: {\r\n        position: 'absolute',\r\n        right: theme.spacing(1),\r\n        top: theme.spacing(1),\r\n        color: theme.palette.grey[500],\r\n    },\r\n    dialogWindow: {\r\n        fullWidth: true,\r\n        maxWidth: 'md'\r\n    },\r\n    table: {\r\n        minWidth: '100%',\r\n    },\r\n    title: {\r\n        fontSize: 14,\r\n    }\r\n}));\r\n\r\nfunction AddLicensePopup (props)  {\r\n\r\n    const classes = styles();\r\n\r\n    const {licensing, socket, instance} = props;\r\n\r\n    const [disabledSave, setDisabledSave] = useState(true);\r\n    const [showSyncDialog, setShowSyncDialog] = useState(false);\r\n    const [login, setLogin] = useState('');\r\n    const [password, setPassword] = useState('');\r\n//    const [licenses, setLicenses] = useState(licensing);\r\n    const [validatedLicenses, setValidatedLicenses] = useState([]);\r\n    const [showLicenseChooseDialog, setShowLicenseChooseDialog] = useState(false);\r\n    const [showErrorDialog, setShowErrorDialog] = useState(false);\r\n    const [showErrorDialogMessage, setShowErrorDialogMessage] = useState('');\r\n\r\n    const refPassword = React.useRef(); // (1)\r\n\r\n    const handleClose = () => {\r\n        props.onChange();\r\n    };\r\n\r\n    useEffect(() => {\r\n        showErrorDialogMessage && showErrorDialogMessage.length > 0 ? setShowErrorDialog(true) : setShowErrorDialog(false);\r\n    },[showErrorDialogMessage]);\r\n\r\n    const handleChange = (res) => {\r\n        setDisabledSave(false);\r\n        setShowLicenseChooseDialog(false);\r\n        if (Array.isArray(licensing.licenses)) {\r\n            licensing.licenses[0] = res.json ? res.json : res.value;\r\n        }  else {\r\n\r\n        }\r\n    }\r\n\r\n    const handleSave = (res) => {\r\n        props.onChange(licensing);\r\n    }\r\n\r\n    const fetchLicenses = () => {\r\n        setValidatedLicenses([]);\r\n\r\n        fetch('https://iobroker.net/api/v1/licenses?type=sw', {headers: {Authorization: `Basic ${btoa(login + ':' + password)}` }})\r\n            .then(async data => await data.json())\r\n            .then(lics => {\r\n                // let tLics = [];\r\n                let t = validatedLicenses;\r\n                const promises = []\r\n                for (let nr = 0; nr < lics.length; nr++) {\r\n                    promises.push(socket.sendTo('knx.' + instance, 'verifyLicense', {license : lics[nr].json})\r\n                        .then(res => {\r\n                            res['json'] = lics[nr].json;\r\n                            t.push(res);\r\n                        }));\r\n                }\r\n\r\n                Promise.all(promises)\r\n                    .then(() => {\r\n                        setValidatedLicenses(t);\r\n                        setShowLicenseChooseDialog(true);\r\n                    });\r\n\r\n                setShowSyncDialog(false);\r\n            })\r\n            .catch(error => {\r\n                console.log(error.message);\r\n                setShowErrorDialogMessage(error.message);\r\n            });\r\n    };\r\n\r\n    const errorDialog = showErrorDialog ?\r\n        <Dialog open={true} fullWidth maxWidth={'md'}>\r\n            <DialogTitle>{I18n.t('Error')}</DialogTitle>\r\n            <DialogContent>\r\n                {I18n.t('This Error occured : ')}{showErrorDialogMessage}\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button variant=\"contained\"  onClick={() => setShowErrorDialogMessage('')} iconStart={<IconCancel/>}>{I18n.t('Cancel')}</Button>\r\n            </DialogActions>\r\n        </Dialog>:\r\n        null;\r\n\r\n    const licenseChooseDialog = showLicenseChooseDialog ?\r\n        <Dialog open={true} fullWidth maxWidth={'md'}>\r\n            <DialogTitle>{I18n.t('Available Licenses')}</DialogTitle>\r\n            <DialogContent>\r\n                <TableContainer component={Paper}>\r\n                    <Table className={classes.table}  size=\"medium\" aria-label=\"license table\">\r\n                        <TableHead>\r\n                            <TableRow>\r\n                                <TableCell style={{ minWidth: 100 }}>{I18n.t('valid until')}</TableCell>\r\n                                <TableCell align=\"right\">{I18n.t('Datapoints')}</TableCell>\r\n                                <TableCell align=\"right\">{I18n.t('Version')}</TableCell>\r\n                                <TableCell style={{ minWidth: 200 }} align=\"right\">{I18n.t('Host ID')}</TableCell>\r\n                            </TableRow>\r\n                        </TableHead>\r\n                            <TableBody>\r\n                                {Array.isArray(validatedLicenses) && validatedLicenses.length > 0 ?\r\n                                    validatedLicenses.map(lic=>\r\n                                        <TableRow hover key={lic.expiration} onClick={() =>handleChange(lic)}>\r\n                                            <TableCell>{\r\n                                                new Date(lic.expiration * 1000).getDate() + '.' +\r\n                                                new Date(lic.expiration * 1000).getMonth() + '.' +\r\n                                                new Date(lic.expiration * 1000).getFullYear() + '   ' +\r\n                                                new Date(lic.expiration * 1000).getHours() + ':' +\r\n                                                new Date(lic.expiration * 1000).getMinutes() + ':' +\r\n                                                new Date(lic.expiration * 1000).getSeconds()\r\n                                            }</TableCell>\r\n                                            <TableCell align=\"right\">{lic.datapoints}</TableCell>\r\n                                            <TableCell align=\"right\">{lic.majorVersion}</TableCell>\r\n                                            <TableCell align=\"right\" >{lic.sysUUID}</TableCell>\r\n                                        </TableRow>\r\n                                    )\r\n                                    : null\r\n                                }\r\n                            </TableBody>\r\n                    </Table>\r\n                </TableContainer>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button variant=\"contained\" color=\"primary\" onClick={() => fetchLicenses()} iconStart={<IconCheck/>}>{I18n.t('Apply')}</Button>\r\n                <Button variant=\"contained\" onClick={() => setShowLicenseChooseDialog(false)} iconStart={<IconCancel/>}>{I18n.t('Cancel')}</Button>\r\n            </DialogActions>\r\n        </Dialog>:\r\n        null;\r\n\r\n    const syncDialog = showSyncDialog ?\r\n        <Dialog open={true}>\r\n            <DialogTitle>{I18n.t('Please enter ioBroker.net login and password')}</DialogTitle>\r\n            <DialogContent>\r\n                <TextField\r\n                    autoFocus\r\n                    fullWidth\r\n                    value={login}\r\n                    onChange={e => setLogin(e.target.value)}\r\n                    label={I18n.t('e-mail')}\r\n                    onKeyUp={e => e.keyCode === 13 && login && refPassword && refPassword.current && refPassword.current.focus()}\r\n                />\r\n                <br/>\r\n                <TextField\r\n                    fullWidth\r\n                    inputRef={refPassword}\r\n                    value={password}\r\n                    onChange={e => setPassword(e.target.value)}\r\n                    type=\"password\"\r\n                    label={I18n.t('password')}\r\n                    onKeyUp={e => e.keyCode === 13 && login && password && fetchLicenses()}\r\n                />\r\n\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button variant=\"contained\" color=\"primary\" onClick={() => fetchLicenses()} iconStart={<IconCheck/>}>Ok</Button>\r\n                <Button variant=\"contained\" onClick={() => setShowSyncDialog(false)} iconStart={<IconCancel/>}>Cancel</Button>\r\n            </DialogActions>\r\n            {errorDialog}\r\n        </Dialog>\r\n         :\r\n        null;\r\n\r\n    return <div>\r\n        <Dialog onClose={handleClose} fullWidth  maxWidth={\"md\"} aria-labelledby=\"customized-dialog-title\" open={props.visible}>\r\n            <DialogTitle disableTypography className={classes.root}>\r\n                {I18n.t('add / modify license')}\r\n                <IconButton aria-label=\"close\" className={classes.closeButton}  onClick={handleClose}>\r\n                    <CloseIcon />\r\n                </IconButton>\r\n            </DialogTitle>\r\n          <DialogContent dividers>\r\n              <Grid container spacing={1}>\r\n\r\n                  {/*licensing && licensing.licenses && Array.isArray(licensing.licenses) && licensing.licenses.length > 1 ?\r\n                      licensing.licenses.map(lic =>\r\n                          <Card>\r\n                              <CardContent>\r\n                                  <Typography className={classes.title} color=\"textSecondary\" gutterBottom>\r\n                                      Word of the Day\r\n                                  </Typography>\r\n                              </CardContent>\r\n                              <CardActions>\r\n                                  <Button variant=\"contained\" autoFocus onClick={handleClose}>\r\n                                      {I18n.t('Close')}\r\n                                  </Button>\r\n                              </CardActions>\r\n                          </Card>\r\n                      )\r\n                      :\r\n                      <Card>\r\n                          <CardContent>\r\n                              <Typography variant=\"h5\" component=\"h2\" gutterBottom>\r\n                                  {I18n.t('Free Licence')}\r\n                              </Typography>\r\n                              <Typography className={classes.pos} color=\"textSecondary\">\r\n                                  {I18n.t('datapoints : ')} max 500\r\n                              </Typography>\r\n                              <Typography className={classes.pos} color=\"textSecondary\">\r\n                                  {I18n.t('valid till : ')} no limit\r\n                              </Typography>\r\n                          </CardContent>\r\n                          <CardActions>\r\n\r\n                          </CardActions>\r\n                      </Card>\r\n                  */}\r\n\r\n              </Grid>\r\n                <TextField\r\n                    id=\"standard-multiline-static\"\r\n                    fullWidth\r\n                    label={I18n.t('license')}\r\n                    multiline\r\n                    rows={10}\r\n                    defaultValue={licensing && licensing.licenses && Array.isArray(licensing.licenses) ? licensing.licenses[0] : null}\r\n                    variant=\"standard\"\r\n                    onChange={e => {handleChange(e.target)}}\r\n                />\r\n            </DialogContent>\r\n            <DialogActions >\r\n                <Button\r\n                    style= {{flex:1}}\r\n                    variant=\"contained\"\r\n                    onClick={() => setShowSyncDialog(true)}\r\n                    startIcon={<IconSync />}\r\n                >\r\n                    {I18n.t('Synchronize with iobroker.net')}\r\n                </Button>\r\n                <Button variant=\"contained\" color=\"primary\" onClick={handleSave} disabled={disabledSave}>\r\n                    {I18n.t('Save')}\r\n                </Button>\r\n                <Button variant=\"contained\" autoFocus onClick={handleClose}>\r\n                    {I18n.t('Close')}\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n        {syncDialog}\r\n        {licenseChooseDialog}\r\n    </div>;\r\n}\r\n\r\nAddLicensePopup.propTypes = {\r\n    socket: PropTypes.object.isRequired,\r\n    instance: PropTypes.number.isRequired,\r\n}\r\n\r\nexport {AddLicensePopup};\r\n","import React from 'react';\r\nimport Dropzone from 'react-dropzone';\r\nimport {makeStyles} from '@material-ui/core/styles';\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nconst style = makeStyles(theme => ({\r\n    baseStyle: {\r\n        flex: 1,\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        padding: '20px',\r\n        borderWidth: 2,\r\n        borderRadius: 2,\r\n        borderColor: '#eeeeee',\r\n        borderStyle: 'dashed',\r\n        backgroundColor: '#fafafa',\r\n        color: '#bdbdbd',\r\n        outline: 'none',\r\n        transition: 'border .24s ease-in-out',\r\n        width: '100%'\r\n    }\r\n}));\r\n\r\n/*const activeStyle = {\r\n    borderColor: '#2196f3'\r\n};\r\n\r\nconst acceptStyle = {\r\n    borderColor: '#00e676'\r\n};\r\n\r\nconst rejectStyle = {\r\n    borderColor: '#ff1744'\r\n};*/\r\n\r\n\r\nfunction StyledDropZone (props){\r\n\r\n    const classes = style();\r\n\r\n    const onDropFile = (res) => {\r\n        props.onDrop(res);\r\n    }\r\n\r\n    return (\r\n        <Dropzone onDrop={onDropFile}\r\n                  accept=\".knxproj\"\r\n                  multiple={false}\r\n        >\r\n            {({getRootProps, getInputProps}) => (\r\n                <section className=\"container\">\r\n                    <div {...getRootProps({className: \"container\"})}>\r\n                        <input {...getInputProps()} />\r\n                        <Button className={classes.baseStyle}>\r\n                            {I18n.t('Drag \\'n\\' drop knxproj file here, or click to select file')}\r\n                        </Button>\r\n                    </div>\r\n                </section>\r\n            )}\r\n        </Dropzone>\r\n    );\r\n}\r\n\r\nexport {StyledDropZone};\r\n","import React, {useEffect, useState} from 'react';\r\nimport {makeStyles, MuiThemeProvider} from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport fileImport from '../Tools/Projectupload';\r\n\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport Logo from '@iobroker/adapter-react/Components/Logo';\r\n\r\nimport {AddLicensePopup} from '../Components/LicensePopupWindow';\r\nimport {StyledDropZone} from '../Components/StyledDropZone';\r\nimport {\r\n    Box,\r\n    Card,\r\n    CardContent,\r\n    Checkbox,\r\n    Dialog,\r\n    FormControlLabel,\r\n    Grid, InputLabel,\r\n    LinearProgress, Select,\r\n    TextField,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogTitle,\r\n    FormControl,\r\n    MenuItem\r\n} from \"@material-ui/core\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport {Alert} from \"@material-ui/lab\";\r\nimport Button from \"@material-ui/core/Button\";\r\n\r\nconst styles = makeStyles(theme => ({\r\n    textField: {\r\n        '& > *': {\r\n            margin: theme.spacing(1),\r\n            width: '27ch',\r\n        },\r\n        margin: theme.spacing(1),\r\n    },\r\n    input: {\r\n        '& > *': {\r\n            margin: theme.spacing(1),\r\n            width: '25ch',\r\n        },\r\n    },\r\n    alertBar: {\r\n        '& > *': {\r\n            margin: theme.spacing(1),\r\n            width: '100%',\r\n        },\r\n    },\r\n    progress: {\r\n        height: 20\r\n    },\r\n    root: {\r\n        height: 10,\r\n        borderRadius: 0,\r\n    },\r\n    fullWidth: {\r\n        width: '98%'\r\n    },\r\n    tab: {\r\n        marginRight: '2rem',\r\n        marginLeft: '0.5rem'\r\n    },\r\n    card: {\r\n        backgroundColor: theme.palette.type === 'dark' ? '#111' : '#EEE'\r\n    },\r\n    controlElement: {}\r\n}));\r\n\r\nfunction Configuration(props) {\r\n    const classes = styles();\r\n\r\n    const {instanceAlive} = props;\r\n    const [passwordDialogOKButton, setPasswordDialogOKButton] = useState(true);\r\n    const [isInstanceAlive, setIsInstanceAlive] = useState( false);\r\n    const [sysUUID, setSysUUID] = useState('');\r\n    const [numberOfDPTs, setNumberOfDPTs] = useState(0);\r\n    const [progressState, setProgressState] = useState(0);\r\n    const [ipList, setIpList] = useState([]);\r\n    const [options, setOptions] = useState({onlyAddNewObjects: true});\r\n    const [licenseVerification, setLicenseVerification] = useState({\r\n        name: '',\r\n        expiration: 0,\r\n        offlineLicense: false,\r\n        numberOfInstances: '',\r\n        majorVersion: '',\r\n        registeredTo: '',\r\n        message: '',\r\n        datapoints: 0,\r\n        sysUUID: '',\r\n        json: ''\r\n    });\r\n\r\n    const [passwordDialogVisible, setPasswordDialogVisible] = useState(false);\r\n\r\n    const [showPopup, setShowPopup] = useState({\r\n        addLicensePopupVisible: false,\r\n        disableSaveButton: true\r\n    });\r\n\r\n    const [licensing, setLicensing] = useState({\r\n        licenses: [props.native.license || ''],\r\n        valid: false,\r\n        permissions: '',\r\n        error: ''\r\n    });\r\n    const [importState, setImportState] = useState({\r\n        visible: false,\r\n        finished: false,\r\n        title: 'title',\r\n        text: 'test',\r\n        numberOfDevices: 0,\r\n        numberOfGA: 0,\r\n        devices: [],\r\n        licenses: [props.native.license || ''],\r\n        attr: ''\r\n    });\r\n\r\n\r\n    //ComponentDidMount=>> bei 1. rendern\r\n    useEffect(() => {\r\n        props.socket.getUuid()\r\n            .then(uuid => {\r\n                setSysUUID(uuid);\r\n                return props.socket.getForeignObjects(props.adapterName + '.' + props.instance + '.*')\r\n                    .then(res => {\r\n                        // object mit prop 'connection' darf nicht mitgezhlt werden\r\n                        if (res.hasOwnProperty('knx.0.info.connection')) {\r\n                            delete res['knx.0.info.connection'];\r\n                        }\r\n                        const ga = Object.entries(res);\r\n                        setNumberOfDPTs(ga.length);\r\n                        return props.socket.getHostByIp(props.common.host)\r\n                            .then(ips => {\r\n                                // [{name, address, family}]\r\n                                ips = ips.filter(item => item.family === 'ipv4' && item.address !== '0.0.0.0');\r\n                                setIpList(ips);\r\n                            });\r\n\r\n                    });\r\n            });\r\n        // Aufrumfunktion\r\n        //  return () => props.socket.unsubscribeState(`system.adapter.${props.adapterName}.${props.instance}.alive`, onAliveChanged);\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []); // <==Bedingung)\r\n\r\n    useEffect(() => {\r\n        checkLicense(props.native.license);\r\n        //setIsInstanceAlive(props.instanceAlive);\r\n\r\n        // verifyLicense(props.native.license);\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [sysUUID, numberOfDPTs, props.instanceAlive]);\r\n\r\n    useEffect(() =>{\r\n        if (instanceAlive !== undefined) {\r\n            if (instanceAlive && instanceAlive.hasOwnProperty('val')){\r\n                setIsInstanceAlive(instanceAlive.val);\r\n            } else\r\n                if (instanceAlive || !instanceAlive){\r\n                    setIsInstanceAlive(instanceAlive || false);\r\n                }\r\n        }\r\n    }, [props.instanceAlive]);\r\n\r\n    useEffect(() => {\r\n        props.onChange('validLicense', licensing.valid);\r\n    }, [licensing.valid]);\r\n\r\n    /*\r\n    useEffect(() => {\r\n        console.log('configuration: socket connected : ' + props.socket.connected);\r\n    }, [props.socket.connected]);\r\n*/\r\n    const verifyLicense = license => {\r\n        props.socket.sendTo('knx.' + props.instance, 'verifyLicense', {license})\r\n            .then(res =>\r\n                setLicenseVerification(res)\r\n            );\r\n    };\r\n\r\n    const checkPassword = pass => {\r\n        if (pass === undefined || pass.length < 8 || !pass.match(/[a-z]/) || !pass.match(/[A-Z]/) || !pass.match(/\\d/)) {\r\n            return I18n.t('invalid password');\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    const checkIpAddress = ipAdr => {\r\n        const ipFormat = /^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/;\r\n        if (ipAdr === undefined || !ipAdr.match(ipFormat)) {\r\n            return I18n.t('invalid ip address');\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    const checkEibAddress = eibAdr => {\r\n        const eibFormat = /^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/;\r\n        if (eibAdr === undefined || !eibAdr.match(eibFormat)) {\r\n            return I18n.t('invalid KNX address');\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    const checkPort = port => {\r\n        const portNr = parseInt(port, 10);\r\n        if (portNr === undefined || isNaN(port) || !Number.isInteger(portNr) || portNr < 1025 || portNr > 65536) {\r\n            return I18n.t('invalid_Port_warning');\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    const checkFrameInterval = frameInterval => {\r\n        const frameInt = parseInt(frameInterval, 10);\r\n        if (frameInt === undefined || isNaN(frameInterval) || !Number.isInteger(frameInt) || frameInt < 10 || frameInt > 300) {\r\n            return I18n.t('invalid frame interval');\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    const fileCallback = async fromDropzone => {\r\n        await fileImport(fromDropzone, props, options, setProgressState, setImportState, getPassword);\r\n    };\r\n\r\n    const checkLicense = license => {\r\n       // if (license) {\r\n        license = license === undefined ? \"\" : license;\r\n        props.socket.sendTo('knx.' + props.instance, 'verifyLicense', {license})\r\n                .then(res => {\r\n                    if (license === \"\"){\r\n                        setLicensing({\r\n                            valid: true,\r\n                            error: '',\r\n                            licenses: [license]\r\n                        });\r\n                    } else if (res.majorVersion === '<2') {\r\n                        setLicensing({\r\n                            valid: false,\r\n                            error: 'This license is for adapter versions <2',\r\n                            licenses: [license]\r\n                        });\r\n                    } else if ((res.expires * 1000 > new Date().getTime())) {\r\n                        setLicensing({\r\n                            valid: false,\r\n                            error: 'Cannot check license: Expired on ' + new Date(res.expires * 1000).toString(),\r\n                            licenses: [license]\r\n                        });\r\n                    } else if (res.sysUUID !== sysUUID) {\r\n                        setLicensing({\r\n                            valid: false,\r\n                            error: 'This license is not valid for this iobroker host',\r\n                            licenses: [license]\r\n                        });\r\n                    } else {\r\n                        setLicensing({valid: true, error: '', licenses: [license]});\r\n                    }\r\n                    setLicenseVerification(res);\r\n                });\r\n        //} else {\r\n        //    setLicensing({valid: false, error: 'not installed', licenses: ['']});\r\n       // }\r\n    };\r\n\r\n    const renderInput = (title, attr, type) => {\r\n        let error;\r\n        switch (attr) {\r\n            case 'pass' :\r\n                error = checkPassword(props.native[attr]);\r\n                break;\r\n            case 'gwip' :\r\n                error = checkIpAddress(props.native[attr]);\r\n                break;\r\n            case 'eibadr' :\r\n                error = checkEibAddress(props.native[attr]);\r\n                break;\r\n            case 'gwipport' :\r\n                error = checkPort(props.native[attr]);\r\n                break;\r\n            case 'frameInterval' :\r\n                error = checkFrameInterval(props.native[attr]);\r\n                break;\r\n            case 'bind' :\r\n                error = checkIpAddress(props.native[attr]);\r\n                break;\r\n            default :\r\n                error = false;\r\n        }\r\n\r\n        return <TextField\r\n            label={I18n.t(title)}\r\n            error={!!error}\r\n            className={props.classes && props.classes.input ? props.classes.input : classes.input}\r\n            value={props.native[attr]}\r\n            type={type || 'text'}\r\n            helperText={error || ''}\r\n            onChange={e => props.onChange(attr, e.target.value)}\r\n        />;\r\n    };\r\n\r\n    const renderCheckbox = (title, attr) => {\r\n        return <FormControlLabel\r\n            key={attr}\r\n            className={props.classes && props.classes.controlElement ? props.classes.controlElement : classes.controlElement}\r\n            control={\r\n                <Checkbox\r\n                    checked={options[attr]}\r\n                    onChange={(event) => setOptions(old => ({\r\n                        ...old,\r\n                        [attr]: event.target.checked\r\n                    }))}\r\n                    color=\"primary\"\r\n                />\r\n            }\r\n            label={I18n.t(title)}\r\n        />;\r\n    };\r\n\r\n    const handleShowImportStateClose = () => {\r\n        setImportState({visible: false});\r\n        setNumberOfDPTs(importState.numberOfGA);\r\n    }\r\n\r\n    function getPassword() {\r\n        return new Promise((resolve, reject) => {\r\n            setPasswordDialogVisible(true);\r\n            let okBtn = document.getElementById('dialog-pw-ok-btn');\r\n            okBtn.addEventListener('click', (evt) => {\r\n                let pw = document.getElementById('standard-password-input');\r\n                if (pw && pw.value){\r\n                    setPasswordDialogVisible(false);\r\n                    resolve(pw.value);\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    const showPasswordDialog = passwordDialogVisible  ?\r\n        <Dialog open={true}>\r\n            <DialogTitle>\r\n                {I18n.t('Password for knx project file')}\r\n            </DialogTitle>\r\n            <DialogContent>\r\n                <TextField\r\n                    id=\"standard-password-input\"\r\n                    label=\"Password\"\r\n                    type=\"password\"\r\n                    autoComplete=\"current-password\"\r\n                    variant=\"standard\"\r\n                    onChange={(e) => { setPasswordDialogOKButton(e.target.value.length > 0 ? false : true)}}\r\n                />\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button variant=\"contained\" id=\"dialog-pw-ok-btn\" disabled={passwordDialogOKButton} autoFocus >\r\n                    {I18n.t('OK')}\r\n                </Button>\r\n                <Button variant=\"contained\" autoFocus onClick={() => { setPasswordDialogVisible(false); setPasswordDialogOKButton(false)}}>\r\n                    {I18n.t('Close')}\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog> :\r\n        null;\r\n\r\n    const showImportState = importState.visible ?\r\n        <Dialog open={true}>\r\n            <DialogTitle>\r\n                {I18n.t('Importstate')}\r\n            </DialogTitle>\r\n            <DialogContent>\r\n                {importState.title === 'importresult' ?\r\n                    I18n.t('Successful imported GAs : ') + importState.numberOfGA :\r\n                    importState.title === 'importerror' ?\r\n                        I18n.t('Import partially or completely failed with error : ') + I18n.t(importState.error) : ''\r\n                }\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button variant=\"contained\" autoFocus onClick={() => handleShowImportStateClose()}>\r\n                    {I18n.t('Close')}\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog> :\r\n        null;\r\n\r\n    const addLicenseOnChange = (res) => {\r\n        setShowPopup({addLicensePopupVisible: false});\r\n        if (res && res.licenses && Array.isArray(res.licenses)) {\r\n            setLicensing(res.licenses[0]);\r\n            checkLicense(res.licenses[0]);\r\n            verifyLicense(res.licenses[0]);\r\n            /*\r\n                        props.socket.getObject('system.adapter.' + props.adapterName + '.' + props.instance)\r\n                            .then(obj => {\r\n                                if (obj.native && obj.native.license){\r\n                                    obj.native.license = res.licenses[0] || '';\r\n                                    props.socket.setObject('system.adapter.' + props.adapterName+ '.' + props.instance, obj);\r\n                                }\r\n                        })\r\n                        */\r\n            props.onChange('license', res.licenses[0] || '');\r\n        }\r\n    };\r\n\r\n    const renderLicenseFeatures = licVerification => <div>\r\n        <Alert severity={licVerification.datapoints >= numberOfDPTs ? 'success' : 'error'}>\r\n            {I18n.t('number of max datapoints : ')}{numberOfDPTs || 0} / {licVerification.datapoints || 0}\r\n        </Alert>\r\n        <Alert severity={licVerification.expiration * 1000 > new Date().getTime() ? 'success' : 'error'}>\r\n            {I18n.t('valid until : ')} {\r\n            licVerification.expiration * 1000 < new Date().getTime() ?\r\n                new Date(licVerification.expiration * 1000).toString() || I18n.t('expired') :\r\n                new Date(licVerification.expiration * 1000).toString()\r\n        }\r\n        </Alert>\r\n\r\n        <Alert severity={'success'}>\r\n            {I18n.t('version : ')} {licVerification.majorVersion}\r\n        </Alert>\r\n    </div>;\r\n\r\n    return <MuiThemeProvider theme={props.theme}>\r\n        <form className={classes.tab}>\r\n            <div>\r\n                <Logo\r\n                    instance={props.instance}\r\n                    common={props.common}\r\n                    native={props.native}\r\n                    onError={text => this.setState({errorText: text})}\r\n                    onLoad={props.onLoad}\r\n                    classes={{}}\r\n                    className=\"\"\r\n                />\r\n            </div>\r\n\r\n            <Grid container spacing={1} justifyContent=\"center\">\r\n                <Grid item xs={7}>\r\n                    <Card classes={{root: props.classes && props.classes.card ? props.classes.card : classes.card}}>\r\n                        <CardContent>\r\n                            <Typography gutterBottom variant=\"h5\" component=\"h2\">\r\n                                {I18n.t('KNX Gateway Settings')}\r\n                            </Typography>\r\n                            <span style={{marginright: '0rem'}}>{renderInput('KNX Gateway IP ', 'gwip', 'ipAddress')}</span>\r\n                            <span style={{ marginright: '1.5rem', marginLeft: '0rem' }}>{renderInput('KNX Gateway Port ', 'gwipport', 'port')}</span>\r\n                            <span style={{ marginright: '1.5rem',marginLeft: '0rem' }}>{renderInput('physical KNX address', 'eibadr', 'eibAddress')}</span>\r\n                            <span style={{ marginLeft: '0rem' }}>{renderInput('KNX packages per second', 'frameInterval', 'frameInterval')}</span>\r\n                        </CardContent>\r\n                    </Card>\r\n                </Grid>\r\n                <Grid item xs={3}>\r\n                    <Card className={props.classes && props.classes.card ? props.classes.card : classes.card}>\r\n                        <CardContent>\r\n                            <Typography gutterBottom variant=\"h5\" component=\"h2\">\r\n                                {I18n.t('local iobroker IP')}\r\n                            </Typography>\r\n                            <FormControl\r\n                                className={props.classes && props.classes.input ? props.classes.input : classes.input}\r\n                            >\r\n                                <InputLabel>{I18n.t('local iobroker IP')}</InputLabel>\r\n                                <Select\r\n                                    value={props.native.bind}\r\n                                    style={{width: '100%'}}\r\n                                    onChange={e => props.onChange('bind', e.target.value)}\r\n                                >\r\n                                    {ipList.map(item => <MenuItem key={item.address}\r\n                                                                  value={item.address}>{item.name}</MenuItem>)}\r\n                                </Select>\r\n                            </FormControl>\r\n                        </CardContent>\r\n                    </Card>\r\n                </Grid>\r\n                <Grid item xs={2}>\r\n                    <Card className={props.classes && props.classes.card ? props.classes.card : classes.card}>\r\n                        <CardContent>\r\n                            <Typography gutterBottom variant=\"h5\" component=\"h2\">\r\n                                {I18n.t('loglevel')}\r\n                            </Typography>\r\n                            <FormControl\r\n                                className={props.classes && props.classes.input ? props.classes.input : classes.input}>\r\n                                <InputLabel>{I18n.t('loglevel')}</InputLabel>\r\n                                <Select\r\n                                    value={props.native.debugLevel}\r\n                                    onChange={e => props.onChange('debugLevel', e.target.value)}\r\n                                >\r\n                                    <MenuItem value={0}>{I18n.t('Info')}</MenuItem>\r\n                                    <MenuItem value={2}>{I18n.t('more')}</MenuItem>\r\n                                    <MenuItem value={3}>{I18n.t('all')}</MenuItem>\r\n                                </Select>\r\n                            </FormControl>\r\n                        </CardContent>\r\n                    </Card>\r\n                </Grid>\r\n                <Grid item xs={12}>\r\n                    <Card className={props.classes && props.classes.card ? props.classes.card : classes.card}>\r\n                        <CardContent>\r\n                            <Typography gutterBottom variant=\"h5\" component=\"h2\">\r\n                                {I18n.t('upload KNX project file')}\r\n                            </Typography>\r\n                            {isInstanceAlive && licensing.valid ?\r\n                                <div>\r\n                                    <div>{renderCheckbox('only import new datapoints', 'onlyAddNewObjects')}</div>\r\n                                    <div style={{marginTop: '2rem'}}>\r\n                                        <StyledDropZone onDrop={fileCallback}/>\r\n                                    </div>\r\n                                    <Box sx={{width: '100%'}} id={'status'} style={{marginTop: '2rem'}}>\r\n                                        <LinearProgress variant=\"determinate\" value={progressState}\r\n                                                        className={classes.progress}/>\r\n                                    </Box>\r\n                                </div> :\r\n                                <Alert severity={'error'}>\r\n                                    {isInstanceAlive ?\r\n                                        I18n.t('license not valid'):\r\n                                        I18n.t('adapter not running')\r\n\r\n                                    }\r\n                                </Alert>\r\n                            }\r\n                        </CardContent>\r\n                    </Card>\r\n                </Grid>\r\n                <Grid item xs={12}>\r\n                    <Card className={props.classes && props.classes.card ? props.classes.card : classes.card}>\r\n                        <CardContent>\r\n                            {isInstanceAlive ?\r\n                                <div>\r\n                                    <Typography gutterBottom variant=\"h5\" component=\"h2\">\r\n                                        {I18n.t('KNX adapter licensing')}\r\n                                    </Typography>\r\n                                    {I18n.t('Host ID (Serial-Number(UUID)) : ')} {props.hostUUID}\r\n                                    <p></p>\r\n                                    <Alert\r\n                                        onClick={() => setShowPopup({addLicensePopupVisible: true}) /*setShowLicAlert(!showLicAlert)*/}\r\n                                        severity={licensing.valid ? 'success' : 'error'}\r\n                                    >\r\n                                        {licensing.valid ?\r\n                                            I18n.t('License valid.') :\r\n                                            licensing.error && licensing.error.message === 'Failed to fetch' ?\r\n                                                I18n.t('License server not available.') :\r\n                                                I18n.t('License error : ') + licensing.error + I18n.t('. Click here to install a license.')\r\n                                        }\r\n                                        {licensing.valid ? renderLicenseFeatures(licenseVerification) : null}\r\n                                    </Alert>\r\n                                </div> :\r\n                                <Alert severity={'error'}>\r\n                                    {I18n.t('adapter not running')}\r\n                                </Alert>\r\n                            }\r\n                        </CardContent>\r\n                    </Card>\r\n                </Grid>\r\n            </Grid>\r\n            {showImportState}\r\n            {showPasswordDialog}\r\n            {showPopup.addLicensePopupVisible &&\r\n            <AddLicensePopup\r\n                instance={props.instance}\r\n                socket={props.socket}\r\n                props={props}\r\n                licensing={licensing}\r\n                onChange={e => addLicenseOnChange(e)}\r\n                visible={showPopup.addLicensePopupVisible}/>\r\n            }\r\n        </form>\r\n    </MuiThemeProvider>;\r\n}\r\n\r\nConfiguration.propTypes = {\r\n    common: PropTypes.object.isRequired,\r\n    native: PropTypes.object.isRequired,\r\n    instance: PropTypes.number.isRequired,\r\n    adapterName: PropTypes.string.isRequired,\r\n    onError: PropTypes.func,\r\n    onLoad: PropTypes.func,\r\n    onChange: PropTypes.func,\r\n    changed: PropTypes.bool,\r\n    socket: PropTypes.object.isRequired,\r\n    progressState: PropTypes.number,\r\n    props: PropTypes.object,\r\n    instanceAlive: PropTypes.bool.isRequired\r\n};\r\n\r\nexport default Configuration;\r\n","/*\r\n    GaProps is part of\r\n        - GaTools\r\n*/\r\n\r\nimport React, {useEffect, useState} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    Checkbox,\r\n    FormControl,\r\n    InputLabel,\r\n    List,\r\n    ListItem,\r\n    ListItemIcon,\r\n    ListItemText,\r\n    MenuItem,\r\n    Select\r\n} from \"@material-ui/core\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nconst getDPTfromDPTObject = (dpt, dptObj) => {\r\n    if (dpt !== undefined && dpt.length) {\r\n        let dpTemp = dpt.replace('DPT', '');\r\n        if (dptObj[dpTemp]) {\r\n            return [dptObj[dpTemp]];\r\n        } else {\r\n            return [{id: dpt}];\r\n        }\r\n    } else {\r\n        return [{id: ''}];\r\n    }\r\n}\r\n\r\nfunction GaProps(props) {\r\n\r\n    const {gaObjArr, dptObjs} = props;\r\n\r\n    const trwuChecked = {\r\n        write: false,\r\n        read: false,\r\n        update: false\r\n    }\r\n\r\n    const [dptObj, setDPTObj] = useState({});\r\n    const [rwuChecked, setrwuChecked] = useState(trwuChecked);\r\n    const [selectedDPT, setSelectedDPT] = useState('');\r\n    const [gaObjArray, setGaObjArray] = useState(gaObjArr);\r\n    const [gaObj, setGaObj] = useState({});\r\n\r\n    useEffect(() => {\r\n        switch (gaObjArr.length) {\r\n            case 0 :\r\n                setGaObj({_id: false});\r\n                setrwuChecked({\r\n                    write: false,\r\n                    read: false,\r\n                    update: false\r\n                });\r\n                break;\r\n            case 1:\r\n                setGaObj(gaObjArr[0]);\r\n                if (gaObjArr[0] && gaObjArr[0].native && gaObjArr[0].native.hasOwnProperty('dpt')) {\r\n                    setSelectedDPT(gaObjArr[0].native.dpt.replace('DPT', ''));\r\n                }\r\n                setChecked({\r\n                    read: gaObjArr[0] && gaObjArr[0].common && gaObjArr[0].common.read ? gaObjArr[0].common.read : false,\r\n                    write: gaObjArr[0] && gaObjArr[0].common && gaObjArr[0].common.write ? gaObjArr[0].common.write : false\r\n                });\r\n                break;\r\n            default : {\r\n                setChecked({\r\n                    read: false,\r\n                    write: false\r\n                });\r\n                setSelectedDPT('');\r\n                setGaObjArray(gaObjArr);\r\n            }\r\n\r\n        }\r\n    }, [gaObjArr]);\r\n\r\n    useEffect(() => {\r\n        setDPTObj(dptObjs);\r\n    }, [dptObjs]);\r\n\r\n    const handlePropsChange = e => {\r\n        let tdpt = getDPTfromDPTObject('DPT' + e.target.value, dptObj);\r\n        if (gaObjArray.length === 0 || gaObj._id !== false) {\r\n            if (gaObj && gaObj._id && gaObj._id !== false) {\r\n                gaObj.native['dpt'] = 'DPT' + e.target.value;\r\n                gaObj.common['unit'] = tdpt[0].unit;\r\n                gaObj.common['type'] = tdpt[0].type;\r\n                setSelectedDPT(e.target.value);\r\n                props.onClick({id: 'gaProps', gaObj: gaObj});\r\n            }\r\n        } else if (gaObjArray.length > 0) {\r\n            for (let cnt = 0; cnt < gaObjArray.length; cnt++) {\r\n                gaObjArray[cnt].native['dpt'] = 'DPT' + e.target.value;\r\n                gaObjArray[cnt].common['unit'] = tdpt[0].unit;\r\n                gaObjArray[cnt].common['type'] = tdpt[0].type;\r\n            }\r\n            setSelectedDPT(e.target.value);\r\n            props.onClick({id: 'gaProps', gaObjArr: gaObjArray});\r\n        }\r\n    }\r\n\r\n    const setChecked = (obj) => {\r\n        if (obj && obj.hasOwnProperty('write') && obj.hasOwnProperty('read')) {\r\n            let trwu = trwuChecked;\r\n\r\n            //  w   r   =>  !w  r   u\r\n            //  w   !r  =>  w   !r  !u\r\n            //  !w  r   =>  !w  r   !u\r\n            //  !w  !r  =>  !w  !r  !u\r\n\r\n            if (obj.write && obj.read) {\r\n                trwu.write = false;\r\n                trwu.read = true;\r\n                trwu.update = true;\r\n            }\r\n\r\n            if (obj.write && !obj.read) {\r\n                trwu.write = true;\r\n                trwu.read = false;\r\n                trwu.update = false;\r\n            }\r\n\r\n            if (!obj.write && obj.read) {\r\n                trwu.write = false;\r\n                trwu.read = true;\r\n                trwu.update = false;\r\n            }\r\n\r\n            if (!obj.write && !obj.read) {\r\n                trwu.write = false;\r\n                trwu.read = false;\r\n                trwu.update = false;\r\n            }\r\n            setrwuChecked(trwu);\r\n        }\r\n    }\r\n\r\n    const handlePropsClick = e => {\r\n        if (gaObjArray.length === 0 || gaObj._id !== false) {\r\n            if (gaObj && gaObj._id && gaObj._id !== false) {\r\n                let rwuPropTemp = {\r\n                    write: gaObj.common.write || false,\r\n                    read: gaObj.common.read || true\r\n                };\r\n                switch (e.target.id) {\r\n                    case 'write' :\r\n                        rwuPropTemp.write = !gaObj.common.write || false;\r\n                        rwuPropTemp.read = !rwuPropTemp.write;\r\n                        break;\r\n                    case 'read' :\r\n                        rwuPropTemp.read = !gaObj.common.read || true;\r\n                        rwuPropTemp.write = !rwuPropTemp.read;\r\n                        break;\r\n                    case 'update' :\r\n                        if (gaObj.common.write && gaObj.common.read) {\r\n                            rwuPropTemp.write = false;\r\n                        } else if (!gaObj.common.write && gaObj.common.read) {\r\n                            rwuPropTemp.write = true;\r\n                        } else if (!gaObj.common.write && !gaObj.common.read) {\r\n                            rwuPropTemp.write = true;\r\n                        }\r\n                        rwuPropTemp.read = true;\r\n                        break;\r\n                    default:\r\n                        rwuPropTemp.write = false;\r\n                        rwuPropTemp.read = false;\r\n                }\r\n                gaObj.common['read'] = rwuPropTemp.read;\r\n                gaObj.common['write'] = rwuPropTemp.write;\r\n                setChecked(rwuPropTemp);\r\n                props.onClick({id: 'gaProps', gaObj: gaObj});\r\n            }\r\n        } else {\r\n            let rwuPropTemp = {write: false, read: true};\r\n            let updateChecked = false;\r\n            let readChecked = false;\r\n            let writeChecked = false;\r\n\r\n            switch (e.target.id) {\r\n                case 'write' :\r\n                    rwuPropTemp.write = !rwuChecked.write;\r\n                    rwuPropTemp.read = false;\r\n                    readChecked = false;\r\n                    writeChecked = !rwuChecked.write;\r\n                    updateChecked = false;\r\n                    break;\r\n                case 'read' :\r\n                    rwuPropTemp.write = false;\r\n                    rwuPropTemp.read = !rwuChecked.read;\r\n                    readChecked = !rwuChecked.read;\r\n                    writeChecked = false;\r\n                    updateChecked = rwuChecked.update;\r\n                    break;\r\n                case 'update' :\r\n                    if (rwuChecked.write && rwuChecked.read) {\r\n                        rwuPropTemp.write = false;\r\n                    } else if (!rwuChecked.write && rwuChecked.read) {\r\n                        rwuPropTemp.write = true;\r\n                    } else if (!rwuChecked.write && !rwuChecked.read) {\r\n                        rwuPropTemp.write = true;\r\n                    }\r\n                    writeChecked = false;\r\n                    readChecked = rwuChecked.read;\r\n                    updateChecked = !rwuChecked.update;\r\n                    rwuPropTemp.read = true;\r\n                    break;\r\n                default:\r\n                    rwuPropTemp.write = false;\r\n                    rwuPropTemp.read = false;\r\n            }\r\n\r\n            setrwuChecked({read: readChecked, write: writeChecked, update: updateChecked});\r\n            let tgaObjArray = gaObjArray;\r\n            for (let cnt = 0; cnt < gaObjArray.length; cnt++) {\r\n                tgaObjArray[cnt].common['write'] = rwuPropTemp.write;\r\n                tgaObjArray[cnt].common['read'] = rwuPropTemp.read;\r\n            }\r\n            setGaObjArray(tgaObjArray);\r\n            props.onClick({id: 'gaProps', gaObjArr: gaObjArray});\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Card sx={{minHeight: '100%'}}>\r\n            <CardContent>\r\n                <Typography sx={{fontSize: 14}} color=\"text.secondary\" gutterBottom>\r\n                    {I18n.t('GA properties')}\r\n                </Typography>\r\n                <Typography variant=\"h5\" component=\"div\">\r\n                    {gaObjArr.length > 1 ? I18n.t('muliselection') : gaObj && gaObj._id && gaObj._id !== false ? gaObj.common.name : I18n.t('none selected')}\r\n                </Typography>\r\n                <List>\r\n                    <ListItem key=\"writeBox\">\r\n                        <ListItemIcon>\r\n                            <Checkbox\r\n                                id=\"write\"\r\n                                edge=\"start\"\r\n                                checked={gaObjArray && gaObjArray.length > 0 ? rwuChecked.write : gaObj && gaObj._id && gaObj._id !== false ? rwuChecked.write : false}\r\n                                tabIndex={-1}\r\n                                disableRipple\r\n                                inputProps={{'aria-labelledby': 'write'}}\r\n                                onClick={e => handlePropsClick(e)}\r\n                                disabled={gaObjArray && gaObjArray.length > 0 ? false : !(gaObj && gaObj._id && gaObj._id !== false)}\r\n                            />\r\n                        </ListItemIcon>\r\n                        <ListItemText id={'write'} secondary={I18n.t('write')}/>\r\n                    </ListItem>\r\n                    <ListItem key=\"readBox\">\r\n                        <ListItemIcon>\r\n                            <Checkbox\r\n                                id='read'\r\n                                edge=\"start\"\r\n                                checked={gaObjArray && gaObjArray.length > 0 ? rwuChecked.read : gaObj && gaObj._id && gaObj._id !== false ? rwuChecked.read : false}\r\n                                tabIndex={-1}\r\n                                disableRipple\r\n                                inputProps={{'aria-labelledby': 'read'}}\r\n                                onClick={e => handlePropsClick(e)}\r\n                                disabled={gaObjArray && gaObjArray.length > 0 ? false : !(gaObj && gaObj._id && gaObj._id !== false)}\r\n                            />\r\n                        </ListItemIcon>\r\n                        <ListItemText id={'read'} secondary={I18n.t('read')}/>\r\n                    </ListItem>\r\n                    <ListItem key=\"updateBox\">\r\n                        <ListItemIcon>\r\n                            <Checkbox\r\n                                id='update'\r\n                                edge=\"start\"\r\n                                checked={gaObjArray && gaObjArray.length > 0 ? rwuChecked.update : gaObj && gaObj._id && gaObj._id !== false ? rwuChecked.update : false}\r\n                                tabIndex={-1}\r\n                                disableRipple\r\n                                inputProps={{'aria-labelledby': 'update'}}\r\n                                onClick={e => handlePropsClick(e)}\r\n                                disabled={gaObjArray && gaObjArray.length > 0 ? false : !(gaObj && gaObj._id && gaObj._id !== false)}\r\n                            />\r\n                        </ListItemIcon>\r\n                        <ListItemText id={'update'} secondary={I18n.t('update')}/>\r\n                    </ListItem>\r\n                    <ListItem key=\"formControl\">\r\n                        <FormControl fullWidth variant=\"standard\"\r\n                                     disabled={gaObjArray && gaObjArray.length > 0 ? false : !(gaObj && gaObj._id && gaObj._id !== false)}>\r\n                            <InputLabel id={'dptlabel'} variant=\"standard\" htmlFor=\"uncontrolled-native\">\r\n                                DPT\r\n                            </InputLabel>\r\n                            {\r\n                                <Select\r\n                                    value={gaObjArray && gaObjArray.length > 0 ? selectedDPT : gaObj && gaObj._id && gaObj._id !== false ? selectedDPT : ''}\r\n                                    onChange={e => handlePropsChange(e)}\r\n                                >\r\n                                    {dptObj && Object.keys(dptObj).map((dpt) =>\r\n                                        <MenuItem id={dpt} value={dpt} key={dpt}>\r\n                                            {dpt}\r\n                                            {dptObj[dpt].DPT_Name ?\r\n                                                ' - ' + dptObj[dpt].DPT_Name.replace('DPT_', ``).replace(/_/g, ` `) : ''\r\n                                            }\r\n                                            {dptObj[dpt].unit && dptObj[dpt].unit !== 'null' ?\r\n                                                ' - ' + dptObj[dpt].unit : ''\r\n                                            }\r\n                                        </MenuItem>\r\n                                    )}\r\n                                </Select>\r\n                            }\r\n                        </FormControl>\r\n                    </ListItem>\r\n                </List>\r\n            </CardContent>\r\n        </Card>\r\n    )\r\n}\r\n\r\nGaProps.propTypes = {\r\n    props: PropTypes.object,\r\n    dptObjs: PropTypes.object.isRequired,\r\n    onChange: PropTypes.func,\r\n};\r\n\r\nexport default GaProps;\r\n","/*\r\n    GaList is part of\r\n        - GaTools\r\n        - GaProps\r\n*/\r\nimport React, {useEffect, useState} from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\r\nimport ArrowRightIcon from '@material-ui/icons/ArrowRight';\r\nimport AppsIcon from '@material-ui/icons/Apps';\r\nimport TreeItem from \"@material-ui/lab/TreeItem\";\r\nimport {TreeView}    from \"@material-ui/lab\";\r\n\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nTreeItem.propTypes = {\r\n    bgColor: PropTypes.string,\r\n    color: PropTypes.string,\r\n    labelIcon: PropTypes.elementType,\r\n    labelIconColor: PropTypes.string,\r\n    labelInfo: PropTypes.string,\r\n    labelText: PropTypes.string,\r\n};\r\n\r\nconst useTreeItemStyles = makeStyles((theme) => ({\r\n    root: {\r\n        color: theme.palette.text.secondary,\r\n        '&:hover > $content': {\r\n            backgroundColor: theme.palette.action.hover,\r\n        },\r\n        '&:focus > $content, &$selected > $content': {\r\n            backgroundColor: `var(--tree-view-bg-color, ${theme.palette.grey[400]})`,\r\n            color: 'var(--tree-view-color)',\r\n        },\r\n        '&:focus > $content $label, &:hover > $content $label, &$selected > $content $label': {\r\n            backgroundColor: 'transparent',\r\n        },\r\n    },\r\n    content: {\r\n        color: theme.palette.text.secondary,\r\n        borderTopRightRadius: theme.spacing(2),\r\n        borderBottomRightRadius: theme.spacing(2),\r\n        paddingRight: theme.spacing(1),\r\n        fontWeight: theme.typography.fontWeightMedium,\r\n        '$expanded > &': {\r\n            fontWeight: theme.typography.fontWeightRegular,\r\n        },\r\n    },\r\n    group: {\r\n        marginLeft: 0,\r\n        '& $content': {\r\n            paddingLeft: theme.spacing(2),\r\n        },\r\n    },\r\n    expanded: {},\r\n    selected: {},\r\n    label: {\r\n        fontWeight: 'inherit',\r\n        color: 'inherit',\r\n    },\r\n    labelRoot: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        padding: theme.spacing(0.5, 0),\r\n    },\r\n    labelIcon: {\r\n        marginRight: theme.spacing(1),\r\n    },\r\n    labelIconColor :{\r\n        color: theme.labelIconColor\r\n    },\r\n    labelText: {\r\n        fontWeight: 'inherit',\r\n        flexGrow: 1,\r\n    },\r\n}));\r\n\r\nfunction StyledTreeItem(props) {\r\n    const classes = useTreeItemStyles();\r\n    const { labelText, labelIcon: LabelIcon, labelIconColor, labelInfo, color, bgColor, ...other } = props;\r\n\r\n    return (\r\n        <TreeItem\r\n            label={\r\n                <div className={classes.labelRoot}>\r\n                    <AppsIcon style={{ color: labelIconColor }}  />\r\n                    <Typography variant=\"body2\" className={classes.labelText}>\r\n                        {labelText}\r\n                    </Typography>\r\n                    <Typography variant=\"caption\" color=\"inherit\">\r\n                        {labelInfo}\r\n                    </Typography>\r\n                </div>\r\n            }\r\n            style={{\r\n                '--tree-view-color': color,\r\n                '--tree-view-bg-color': bgColor,\r\n            }}\r\n            classes={{\r\n                root: classes.root,\r\n                content: classes.content,\r\n                expanded: classes.expanded,\r\n                selected: classes.selected,\r\n                group: classes.group,\r\n                label: classes.label,\r\n            }}\r\n            {...other}\r\n        />\r\n    );\r\n}\r\n\r\nfunction GaList (props) {\r\n\r\n    const {gaObjects, multiselect} = props;\r\n\r\n    const [gaObject, setGAObject] = useState([]);\r\n\r\n    useEffect(()=>{\r\n        setGAObject(gaObjects);\r\n    },[gaObjects]);\r\n\r\n\r\n    const handleMultiSelect = (e, value) => {\r\n        props.onClick({id: 'gaList', value: value});\r\n    }\r\n\r\n    return (\r\n        <TreeView\r\n            key={'galisttree'}\r\n            id={'galist'}\r\n            aria-label=\"knx\"\r\n            defaultExpanded={['3']}\r\n            defaultCollapseIcon={<ArrowDropDownIcon />}\r\n            defaultExpandIcon={<ArrowRightIcon />}\r\n            defaultEndIcon={<div style={{ width: 24 }} />}\r\n            sx={{ height: '100%', flexGrow: 1, maxWidth: '100%' }}\r\n            multiSelect={multiselect ? multiselect : false}\r\n            onNodeSelect={(e, value) => handleMultiSelect(e, value)}\r\n        >\r\n            {gaObject && gaObject.map(hg=>(\r\n                <StyledTreeItem\r\n                    key={'hg'+hg.hgId+hg.hgName}\r\n                    nodeId={'galist-123hg'+hg.hgId+hg.hgName}\r\n                    labelIcon={AppsIcon}\r\n                    labelIconColor={'blue'}\r\n                    labelText={hg.hgId + ' ' + hg.hgName}\r\n                >\r\n                    {hg.mg.map(mg =>(\r\n                        <StyledTreeItem\r\n                            key={'mg'+mg.mgId+mg.mgName}\r\n                            nodeId={'galist-123mg'+mg.mgId+mg.mgName}\r\n                            labelIcon={AppsIcon}\r\n                            labelIconColor={'green'}\r\n                            labelText={mg.mgId + ' ' + mg.mgName}\r\n                        >\r\n                            {mg.ga.map(ga=>(\r\n                                <StyledTreeItem\r\n                                    style={{marginLeft: 20}}\r\n                                    key={ga.props.g._id}\r\n                                    nodeId={ga.props.g._id}\r\n                                    labelIcon={AppsIcon}\r\n                                    labelIconColor={'red'}\r\n                                    labelText={ga.gaId + ' ' + ga.gaName}\r\n                                />\r\n                            ))}\r\n                        </StyledTreeItem>\r\n                    ))}\r\n                </StyledTreeItem>\r\n\r\n            ))}\r\n        </TreeView>\r\n    );\r\n}\r\n\r\nGaList.propTypes = {\r\n    gaObjects: PropTypes.array.isRequired,\r\n};\r\n\r\nexport default GaList;\r\n","/*\r\n    GaStateAct is part of\r\n        - GaTools\r\n*/\r\nimport React, {useEffect, useState} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport GaProps from './GaProps';\r\nimport {makeStyles} from '@material-ui/core/styles';\r\nimport {\r\n    Card,\r\n    CardActionArea,\r\n    CardActions,\r\n    CardContent,\r\n    DialogActions,\r\n    Dialog,\r\n    DialogContent, DialogTitle, TextField, Grid\r\n} from \"@material-ui/core\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport IconCancel from \"@material-ui/icons/Cancel\";\r\nimport BuildIcon from '@material-ui/icons/Build';\r\nimport GaList from '../Components/GaList';\r\nimport IconCheck from \"@material-ui/icons/Check\";\r\n\r\nconst styles = makeStyles(theme => ({\r\n    root: {\r\n        margin: 0,\r\n        padding: theme.spacing(2)\r\n    },\r\n}))\r\n\r\nfunction GaStateAct (props) {\r\n\r\n    const {gaObjArr, gaRefIdMap, gaObjects, actObject, stateObject, socket} = props;\r\n\r\n    const classes = styles();\r\n\r\n    const [actObj, setActObj] = useState({});\r\n    const [stateObj, setStateObj] = useState({});\r\n    const [gaObj, setGAObj] = useState({});\r\n    const [showGaListDialog, setShowGaListDialog] = useState(false);\r\n    const [gaListDialogOKButtonDisabled,setGaListDialogOKButtonDisabled] = useState(true);\r\n    const [gaListReturn, setGaListReturn] = useState('');\r\n    const [messageText, setMessageText] = useState('');\r\n\r\n    useEffect(() => {\r\n        if (gaObjArr && gaObjArr.length === 1){\r\n            let tGa = gaObjArr[0];\r\n            if (tGa && tGa.common && tGa.native){\r\n                let tGaCommon = tGa.common;\r\n                let tGaNative = tGa.native;\r\n                tGaCommon['read']  = !tGaCommon.hasOwnProperty('read') ? false : tGaCommon.read;\r\n                tGaCommon['write'] = !tGaCommon.hasOwnProperty('write') ? false : tGaCommon.write;\r\n                if ((tGaCommon.read && tGaCommon.write) || (tGaCommon.read && !tGaCommon.write) ) {\r\n                    setActObj({});\r\n                    setStateObj(tGa);\r\n                }\r\n                if(!tGaCommon.read && tGaCommon.write){\r\n                        setActObj(tGa);\r\n                        setStateObj({});\r\n                }\r\n                if (tGaNative.actGARefId && tGaNative.actGARefId.length > 0) {\r\n                    setActObj(socket.getObject(gaRefIdMap[tGaNative.actGARefId]).then(res =>{return res}));\r\n                    setStateObj(tGa);\r\n                }\r\n                if (tGaNative.statusGARefId && tGaNative.statusGARefId.length > 0){\r\n                    setActObj(tGa);\r\n                    setStateObj(socket.getObject(gaRefIdMap[tGaNative.statusGARefId]).then(res =>{return res}));\r\n                }\r\n                if (!tGaCommon.read && !tGaCommon.write ){\r\n                    setActObj({});\r\n                    setStateObj({});\r\n                }\r\n                setGAObj(tGa);\r\n            }\r\n        }\r\n    }, [gaObjArr]);\r\n\r\n    useEffect(() => {\r\n        setActObj(actObject);\r\n    }, [actObject]);\r\n\r\n    useEffect(() => {\r\n        setStateObj(stateObject);\r\n    }, [stateObject]);\r\n\r\n    useEffect(() =>{\r\n        if (gaListReturn && gaListReturn.value && gaListReturn.value.indexOf('knx.') > -1 ) {\r\n            if (gaObj._id !== gaListReturn.value){\r\n                setGaListDialogOKButtonDisabled(false);\r\n            } else {\r\n                setGaListDialogOKButtonDisabled(true);\r\n            }\r\n        } else {\r\n            setGaListDialogOKButtonDisabled(true);\r\n        }\r\n    }, [gaListReturn])\r\n\r\n    const handleModifyClick = () => {\r\n        if (gaObj && gaObj.native &&\r\n            (!gaObj.native.hasOwnProperty('linkedState') || (gaObj.native.hasOwnProperty('linkedState') && gaObj.native.linkedState.length === 0))){\r\n            setGaListDialogOKButtonDisabled(true);\r\n            setShowGaListDialog(true);\r\n        } else {\r\n            setMessageText(I18n.t('This is not possible, if this GA is already linked with a non-knx state.'));\r\n        }\r\n    }\r\n\r\n    const showMessage = messageText.length > 0 ?\r\n        <Dialog open={true}>\r\n            <DialogTitle className={classes.root}>\r\n                {I18n.t('Information')}\r\n            </DialogTitle>\r\n            <DialogContent>\r\n                {messageText}\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button variant=\"contained\" onClick={() => setMessageText('')} iconStart={<IconCancel/>}>Cancel</Button>\r\n            </DialogActions>\r\n        </Dialog> :\r\n        null\r\n\r\n    const handleDeleteClick = () => {\r\n        if (actObj && actObj.native && stateObj && stateObj.native){\r\n            // this is a StateObj\r\n            actObj.native.actGARefId = '';\r\n            actObj.native.statusGARefId = '';\r\n            stateObj.native.actGARefId = '';\r\n            stateObj.native.statusGARefId = '';\r\n            setStateObj(stateObj);\r\n            setActObj(actObj);\r\n            props.onClick({id: 'gaStateAct', delete : [actObj, stateObj]});\r\n        }\r\n    }\r\n\r\n    const handleGaListClick = () => {\r\n        if (gaObj.common.write && !gaObj.common.read) {\r\n            props.onClick({id: 'gaStateAct', stateId : gaListReturn.value});\r\n            setShowGaListDialog(false);\r\n        } else {\r\n            props.onClick({id: 'gaStateAct', actId : gaListReturn.value});\r\n            setShowGaListDialog(false);\r\n        }\r\n    }\r\n\r\n    const getHelperText = ga =>{\r\n        if (ga.length > 0 && ga.match(/\\d*\\/\\d*\\/\\d*/g)) {\r\n            let hg = ga.split('/')[0];\r\n            let mg = ga.split('/')[1];\r\n            return ga + ' : ' + gaObjects[hg].hgName + ' > ' + gaObjects[hg].mg[mg].mgName;\r\n        } else {\r\n            return '';\r\n        }\r\n    }\r\n\r\n    const gaListDialog = showGaListDialog ?\r\n        <Dialog open={true}>\r\n            <DialogTitle className={classes.root}>\r\n                {I18n.t('Choose corresponding GA')}\r\n            </DialogTitle>\r\n            <DialogContent>\r\n                <GaList gaObjects={gaObjects} multiselect={false} onClick={res =>setGaListReturn(res)}/>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button variant=\"contained\" color=\"primary\" disabled={gaListDialogOKButtonDisabled} onClick={() => handleGaListClick()} iconStart={<IconCheck/>}>Ok</Button>\r\n                <Button variant=\"contained\" onClick={() => setShowGaListDialog(false)} iconStart={<IconCancel/>}>Cancel</Button>\r\n            </DialogActions>\r\n        </Dialog>:\r\n        null\r\n\r\n    return (\r\n        <Card sx={{ minHeight: '100%'}}>\r\n            <CardContent>\r\n                <Grid container direction={\"column\"} spacing={2} >\r\n                    <Grid item>\r\n                        <Typography sx={{ fontSize: 14 }} color=\"text.secondary\" gutterBottom>\r\n                            {I18n.t('GA State - Actuator relation')}\r\n                        </Typography >\r\n                    </Grid>\r\n                    <Grid item>\r\n                        <TextField\r\n                            id=\"standard-read-only-input1\"\r\n                            fullWidth\r\n                            label=\"Actuator GA\"\r\n                            helperText={getHelperText(gaObjArr.length === 1 && actObj && actObj.native && actObj.native.hasOwnProperty('address') ? actObj.native.address : '')}\r\n                            value={gaObjArr.length === 1 && actObj && actObj.common && actObj.common.hasOwnProperty('name') ? actObj.common.name : '' }\r\n                            InputProps={{\r\n                                readOnly: true,\r\n                            }}\r\n                            variant=\"standard\"\r\n                        />\r\n                    </Grid>\r\n                    <Grid item>\r\n                        <TextField\r\n                            id=\"standard-read-only-input2\"\r\n                            fullWidth\r\n                            label=\"State GA\"\r\n                            helperText={getHelperText(gaObjArr.length === 1 && stateObj && stateObj.native && stateObj.native.hasOwnProperty('address')  ? stateObj.native.address : '')}\r\n                            value={gaObjArr.length === 1 && stateObj && stateObj.common && stateObj.common.hasOwnProperty('name')  ? stateObj.common.name : ''}\r\n                            InputProps={{\r\n                                readOnly: true,\r\n                            }}\r\n                            variant=\"standard\"\r\n                        />\r\n                    </Grid>\r\n                </Grid>\r\n        </CardContent>\r\n            <CardActionArea>\r\n                <CardActions>\r\n                    {gaObjArr.length === 1 && (actObj.hasOwnProperty('_id')  && stateObj.hasOwnProperty('_id')) &&\r\n                    <Button variant=\"contained\"\r\n                            onClick={() => handleDeleteClick()}\r\n                            iconStart={<BuildIcon/>}>\r\n                        {I18n.t('delete')}\r\n                    </Button>\r\n                    }\r\n                    {gaObjArr.length === 1 && ((!actObj.hasOwnProperty('_id')  && stateObj.hasOwnProperty('_id')) || ((actObj.hasOwnProperty('_id')  && !stateObj.hasOwnProperty('_id')))) &&\r\n                    <Button variant=\"contained\"\r\n                            key={'newRelation'}\r\n                            onClick={e=>handleModifyClick(e)}\r\n                            iconStart={<BuildIcon/>}\r\n                    >\r\n                        {I18n.t('add new relation')}\r\n                    </Button>\r\n                    }\r\n                </CardActions>\r\n            </CardActionArea>\r\n            {gaListDialog}\r\n            {showMessage}\r\n    </Card>);\r\n}\r\n\r\nGaProps.propTypes = {\r\n    props: PropTypes.object.isRequired,\r\n    gaObjArray : PropTypes.array,\r\n    actObject : PropTypes.object,\r\n    gaObjects : PropTypes.array.isRequired,\r\n    stateObject : PropTypes.object,\r\n    onClick: PropTypes.func\r\n};\r\n\r\nexport default GaStateAct;","/*\r\n    GaStateAct is part of\r\n        - GaTools\r\n*/\r\n\r\n\r\n// 2Do: nur available wenn eine GA ist selected und keine relation hat (state oder act), datenpunkttyp prfen (number, string,...)\r\n\r\nimport React, {useEffect, useState} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport {\r\n    Card,\r\n    CardActionArea,\r\n    CardActions,\r\n    CardContent,\r\n    Dialog, DialogActions,\r\n    DialogContent,\r\n    DialogTitle,\r\n    Grid,\r\n    TextField\r\n} from \"@material-ui/core\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport BuildIcon from \"@material-ui/icons/Build\";\r\nimport TreeItem from \"@material-ui/lab/TreeItem\";\r\nimport {makeStyles} from \"@material-ui/core/styles\";\r\nimport ArrowDropDownIcon from \"@material-ui/icons/ArrowDropDown\";\r\nimport ArrowRightIcon from \"@material-ui/icons/ArrowRight\";\r\nimport {TreeView} from \"@material-ui/lab\";\r\nimport AppsIcon from \"@material-ui/icons/Apps\";\r\nimport IconCheck from \"@material-ui/icons/Check\";\r\nimport IconCancel from \"@material-ui/icons/Cancel\";\r\n\r\nconst styles = makeStyles(theme => ({\r\n    root: {\r\n        margin: 0,\r\n        padding: theme.spacing(2)\r\n    },\r\n}))\r\n\r\nTreeItem.propTypes = {\r\n    bgColor: PropTypes.string,\r\n    color: PropTypes.string,\r\n    labelIcon: PropTypes.elementType,\r\n    labelIconColor: PropTypes.string,\r\n    labelInfo: PropTypes.string,\r\n    labelText: PropTypes.string,\r\n};\r\n\r\nconst useTreeItemStyles = makeStyles((theme) => ({\r\n    root: {\r\n        color: theme.palette.text.secondary,\r\n        '&:hover > $content': {\r\n            backgroundColor: theme.palette.action.hover,\r\n        },\r\n        '&:focus > $content, &$selected > $content': {\r\n            backgroundColor: `var(--tree-view-bg-color, ${theme.palette.grey[400]})`,\r\n            color: 'var(--tree-view-color)',\r\n        },\r\n        '&:focus > $content $label, &:hover > $content $label, &$selected > $content $label': {\r\n            backgroundColor: 'transparent',\r\n        },\r\n    },\r\n    content: {\r\n        color: theme.palette.text.secondary,\r\n        borderTopRightRadius: theme.spacing(2),\r\n        borderBottomRightRadius: theme.spacing(2),\r\n        paddingRight: theme.spacing(1),\r\n        fontWeight: theme.typography.fontWeightMedium,\r\n        '$expanded > &': {\r\n            fontWeight: theme.typography.fontWeightRegular,\r\n        },\r\n    },\r\n    group: {\r\n        marginLeft: 0,\r\n        '& $content': {\r\n            paddingLeft: theme.spacing(2),\r\n        },\r\n    },\r\n    expanded: {},\r\n    selected: {},\r\n    label: {\r\n        fontWeight: 'inherit',\r\n        color: 'inherit',\r\n    },\r\n    labelRoot: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        padding: theme.spacing(0.5, 0),\r\n    },\r\n    labelIcon: {\r\n        marginRight: theme.spacing(1),\r\n    },\r\n    labelIconColor :{\r\n        color: theme.labelIconColor\r\n    },\r\n    labelText: {\r\n        fontWeight: 'inherit',\r\n        flexGrow: 1,\r\n    },\r\n}));\r\n\r\nfunction StyledTreeItem(props) {\r\n    const classes = useTreeItemStyles();\r\n    const { labelText, labelIcon: LabelIcon, labelIconColor, labelInfo, color, bgColor, ...other } = props;\r\n\r\n    return (\r\n        <TreeItem\r\n            label={\r\n                <div className={classes.labelRoot}>\r\n                    <AppsIcon style={{ color: labelIconColor }}  />\r\n                    <Typography variant=\"body2\" className={classes.labelText}>\r\n                        {labelText}\r\n                    </Typography>\r\n                    <Typography variant=\"caption\" color=\"inherit\">\r\n                        {labelInfo}\r\n                    </Typography>\r\n                </div>\r\n            }\r\n            style={{\r\n                '--tree-view-color': color,\r\n                '--tree-view-bg-color': bgColor,\r\n            }}\r\n            classes={{\r\n                root: classes.root,\r\n                content: classes.content,\r\n                expanded: classes.expanded,\r\n                selected: classes.selected,\r\n                group: classes.group,\r\n                label: classes.label\r\n            }}\r\n            {...other}\r\n        />\r\n    );\r\n}\r\n\r\nfunction GaLinkedState(props) {\r\n\r\n    const {socket, gaObjArr} = props;\r\n\r\n    const classes = styles();\r\n\r\n    const [iobObjects, setIobObjects] = useState({});\r\n    const [showIobObjectsDialog, setShowIobObjectsDialog] = useState(false);\r\n    const [iobListDialogOKButtonDisabled, setIobListDialogOKButtonDisabled] = useState(true);\r\n    const [lastSelectedItem, setLastSelectedItem] = useState({});\r\n    const [messageText, setMessageText] = useState('');\r\n    const [gaObj, setGaObj] = useState({});\r\n\r\n    useEffect(() => {\r\n        getIobObjects();\r\n    },[]);\r\n\r\n    useEffect(() => {\r\n        if (Array.isArray(gaObjArr) && gaObjArr.length === 1){\r\n            setGaObj(gaObjArr[0]);\r\n        } else {\r\n            setGaObj({});\r\n        }\r\n    }, [gaObjArr]);\r\n\r\n    const handleAddStateClick = () => {\r\n        if (gaObj && gaObj.common && !gaObj.common.read && gaObj.common.write) {\r\n            if (gaObj.native.statusGARefId.length === 0 && gaObj.native.actGARefId.length === 0){\r\n                setShowIobObjectsDialog(true);\r\n            } else {\r\n                setMessageText(I18n.t('This is not allowed if this GA already has a State-Act relation.'));\r\n            }\r\n        } else {\r\n            setMessageText(I18n.t('The source GA has to have only write attribute.'));\r\n        }\r\n    }\r\n\r\n    const handleDeleteStateClick = () => {\r\n        if (gaObj && gaObj.native && gaObj.native.linkedState){\r\n            delete gaObj.native.linkedState;\r\n            props.onClick({id: 'linkedState', linkedState: gaObj});\r\n        }\r\n    }\r\n\r\n    const handleIobObjectClick = (e, value) => {\r\n        //console.log(e + value);\r\n        if (value._id) {\r\n            setIobListDialogOKButtonDisabled(false);\r\n            setLastSelectedItem(value);\r\n        } else {\r\n            setIobListDialogOKButtonDisabled(true);\r\n            setLastSelectedItem({});\r\n        }\r\n    }\r\n\r\n    const handleIobListClick = () => {\r\n        if (lastSelectedItem._id && gaObj && gaObj.native){\r\n            if (lastSelectedItem.common && lastSelectedItem.common.hasOwnProperty('type') &&\r\n            gaObj.common && gaObj.common.hasOwnProperty('type') && gaObj.common.type === lastSelectedItem.common.type){\r\n                // preparing object\r\n                gaObj.common['read'] = false;\r\n                gaObj.common['write'] = true;\r\n                //gaObj.common['type'] = lastSelectedItem.common.hasOwnProperty('type') ? lastSelectedItem.common.type : 'string';\r\n                gaObj.native.actGARefId = '';\r\n                gaObj.native.statusGARefId = '';\r\n                gaObj.native['linkedState'] = lastSelectedItem._id;\r\n                props.onClick({id: 'linkedState', linkedState: gaObj});\r\n                setShowIobObjectsDialog(false);\r\n                setIobListDialogOKButtonDisabled(true);\r\n            } else {\r\n                setMessageText(I18n.t('The value types does not match. Please select a proper Datapointtype for GA.'));\r\n                setShowIobObjectsDialog(false);\r\n                setIobListDialogOKButtonDisabled(true);\r\n            }\r\n        }\r\n    }\r\n\r\n    const showMessage = messageText.length > 0 ?\r\n        <Dialog open={true}>\r\n            <DialogTitle className={classes.root}>\r\n                {I18n.t('Information')}\r\n            </DialogTitle>\r\n            <DialogContent>\r\n                {messageText}\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button variant=\"contained\" onClick={() => setMessageText('')} iconStart={<IconCancel/>}>Cancel</Button>\r\n            </DialogActions>\r\n        </Dialog> :\r\n        null\r\n\r\n\r\n    const getIobObjects = () => {\r\n        return socket.getForeignObjects('*')\r\n            .then(res => {\r\n                let tObjObject = {}\r\n                for (let iobObj in res) {\r\n                    if (!(iobObj.match(/^.*knx\\./g) ||\r\n                        iobObj.match(/^system\\./g) ||\r\n                        iobObj.match(/^admin\\./g) ||\r\n                        iobObj.match(/^vis.*\\./g) ||\r\n                        iobObj.match(/^web\\./g)) ) {\r\n                        let iobObjSplit = iobObj.split('.');\r\n\r\n                        if (iobObjSplit.length > 0) {\r\n                            tObjObject[iobObjSplit[0]] = tObjObject[iobObjSplit[0]] ?\r\n                                tObjObject[iobObjSplit[0]] : iobObjSplit.length === 1 ? res[iobObj] : {};\r\n                            if (iobObjSplit.length > 1) {\r\n                                tObjObject[iobObjSplit[0]][iobObjSplit[1]] = tObjObject[iobObjSplit[0]][iobObjSplit[1]] ?\r\n                                    tObjObject[iobObjSplit[0]][iobObjSplit[1]] : iobObjSplit.length === 2 ? res[iobObj] : {};\r\n                                if (iobObjSplit.length > 2) {\r\n                                    tObjObject[iobObjSplit[0]][iobObjSplit[1]][iobObjSplit[2]] = tObjObject[iobObjSplit[0]][iobObjSplit[1]][iobObjSplit[2]] ?\r\n                                        tObjObject[iobObjSplit[0]][iobObjSplit[1]][iobObjSplit[2]] : iobObjSplit.length === 3 ? res[iobObj] : {};\r\n                                    if (iobObjSplit.length > 3) {\r\n                                        tObjObject[iobObjSplit[0]][iobObjSplit[1]][iobObjSplit[2]][iobObjSplit[3]] = tObjObject[iobObjSplit[0]][iobObjSplit[1]][iobObjSplit[2]][iobObjSplit[3]] ?\r\n                                            tObjObject[iobObjSplit[0]][iobObjSplit[1]][iobObjSplit[2]][iobObjSplit[3]] : iobObjSplit.length === 4 ? res[iobObj] : {};\r\n                                        if (iobObjSplit.length > 4) {\r\n                                            tObjObject[iobObjSplit[0]][iobObjSplit[1]][iobObjSplit[2]][iobObjSplit[3]][iobObjSplit[4]] = tObjObject[iobObjSplit[0]][iobObjSplit[1]][iobObjSplit[2]][iobObjSplit[3]][iobObjSplit[4]] ?\r\n                                                tObjObject[iobObjSplit[0]][iobObjSplit[1]][iobObjSplit[2]][iobObjSplit[3]][iobObjSplit[4]] : iobObjSplit.length === 5 ? res[iobObj] : {};\r\n                                            if (iobObjSplit.length > 5) {\r\n                                                tObjObject[iobObjSplit[0]][iobObjSplit[1]][iobObjSplit[2]][iobObjSplit[3]][iobObjSplit[4]][iobObjSplit[5]] = tObjObject[iobObjSplit[0]][iobObjSplit[1]][iobObjSplit[2]][iobObjSplit[3]][iobObjSplit[4]][iobObjSplit[5]] ?\r\n                                                    tObjObject[iobObjSplit[0]][iobObjSplit[1]][iobObjSplit[2]][iobObjSplit[3]][iobObjSplit[4]][iobObjSplit[5]] : iobObjSplit.length === 6 ? res[iobObj] : {};\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                setIobObjects(tObjObject);\r\n            })\r\n    }\r\n\r\n    const iobObjectBrowser = showIobObjectsDialog ?\r\n        <Dialog open={true}\r\n                fullWidth={true}\r\n                maxWidth={'md'}>\r\n            <DialogTitle className={classes.root}>\r\n                {I18n.t('Choose')}\r\n            </DialogTitle>\r\n            <DialogContent>\r\n                <TreeView\r\n                    key={'iobobjecttree'}\r\n                    id={'objecttree'}\r\n                    aria-label=\"ioBroker\"\r\n                    defaultExpanded={['3']}\r\n                    defaultCollapseIcon={<ArrowDropDownIcon />}\r\n                    defaultExpandIcon={<ArrowRightIcon />}\r\n                    defaultEndIcon={<div style={{ width: 24 }} />}\r\n                    sx={{ height: '100%', flexGrow: 1, maxWidth: '100%' }}\r\n                    // multiSelect={multiselect ? multiselect : false}\r\n                    onNodeSelect={(e, value) => handleIobObjectClick(e, value)}\r\n                >\r\n                    {iobObjects && !iobObjects.hasOwnProperty('_id') && Object.keys(iobObjects).map(levelOne =>(\r\n                      <StyledTreeItem\r\n                            key={'l1' + levelOne}\r\n                            nodeId={levelOne}\r\n                            labelIcon={AppsIcon}\r\n                            labelIconColor={iobObjects[levelOne].hasOwnProperty('_id') ? 'green' : 'red'}\r\n                            labelText={levelOne}\r\n                        >\r\n                          {iobObjects && iobObjects[levelOne] && !iobObjects[levelOne].hasOwnProperty('_id') && Object.keys(iobObjects[levelOne]).map(levelTwo => (\r\n                              <StyledTreeItem\r\n                                  style={{marginLeft: 20}}\r\n                                  key={'l2' + levelOne + levelTwo}\r\n                                  nodeId={iobObjects[levelOne][levelTwo].hasOwnProperty('_id') ? iobObjects[levelOne][levelTwo] : levelOne + '.' + levelTwo}\r\n                                  labelIcon={AppsIcon}\r\n                                  labelIconColor={iobObjects[levelOne][levelTwo].hasOwnProperty('_id') ? 'green' : 'red'}\r\n                                  labelText={levelTwo}\r\n                              >\r\n                                  {iobObjects && iobObjects[levelOne][levelTwo] && !iobObjects[levelOne][levelTwo].hasOwnProperty('_id') && Object.keys(iobObjects[levelOne][levelTwo]).map(levelThree => (\r\n                                      <StyledTreeItem\r\n                                          style={{marginLeft: 20}}\r\n                                          key={'l3' + levelOne + levelTwo + levelThree}\r\n                                          nodeId={iobObjects[levelOne][levelTwo][levelThree].hasOwnProperty('_id') ? iobObjects[levelOne][levelTwo][levelThree] : levelOne + '.' + levelTwo + '.' + levelThree}\r\n                                          labelIcon={AppsIcon}\r\n                                          labelIconColor={iobObjects[levelOne][levelTwo][levelThree].hasOwnProperty('_id') ? 'green' : 'red'}\r\n                                          labelText={levelThree}\r\n                                      >\r\n                                          {iobObjects && iobObjects[levelOne][levelTwo][levelThree] && !iobObjects[levelOne][levelTwo][levelThree].hasOwnProperty('_id') && Object.keys(iobObjects[levelOne][levelTwo][levelThree]).map(levelFour => (\r\n                                              <StyledTreeItem\r\n                                                  style={{marginLeft: 20}}\r\n                                                  key={'l4' + levelOne + levelTwo + levelThree + levelFour}\r\n                                                  nodeId={iobObjects[levelOne][levelTwo][levelThree][levelFour].hasOwnProperty('_id') ? iobObjects[levelOne][levelTwo][levelThree][levelFour] : levelOne + '.' + levelTwo + '.' + levelThree + '.' + levelFour}\r\n                                                  labelIcon={AppsIcon}\r\n                                                  labelIconColor={iobObjects[levelOne][levelTwo][levelThree][levelFour].hasOwnProperty('_id') ? 'green' : 'red'}\r\n                                                  labelText={levelFour}\r\n                                              >\r\n                                                  {iobObjects && iobObjects[levelOne][levelTwo][levelThree][levelFour] && !iobObjects[levelOne][levelTwo][levelThree][levelFour].hasOwnProperty('_id') && Object.keys(iobObjects[levelOne][levelTwo][levelThree][levelFour]).map(levelFive => (\r\n                                                      <StyledTreeItem\r\n                                                          style={{marginLeft: 20}}\r\n                                                          key={'l5' + levelOne + levelTwo + levelThree + levelFour + levelFive}\r\n                                                          nodeId={iobObjects[levelOne][levelTwo][levelThree][levelFour][levelFive].hasOwnProperty('_id') ? iobObjects[levelOne][levelTwo][levelThree][levelFour][levelFive] : levelOne + '.' + levelTwo + '.' + levelThree + '.' + levelFour + '.' + levelFive}\r\n                                                          labelIcon={AppsIcon}\r\n                                                          labelIconColor={iobObjects[levelOne][levelTwo][levelThree][levelFour][levelFive].hasOwnProperty('_id') ? 'green' : 'red'}\r\n                                                          labelText={levelFive}\r\n                                                      >\r\n                                                          {iobObjects && iobObjects[levelOne][levelTwo][levelThree][levelFour][levelFive] && !iobObjects[levelOne][levelTwo][levelThree][levelFour][levelFive].hasOwnProperty('_id') && Object.keys(iobObjects[levelOne][levelTwo][levelThree][levelFour][levelFive]).map(levelSix => (\r\n                                                              <StyledTreeItem\r\n                                                                  style={{marginLeft: 20}}\r\n                                                                  key={'l6' + levelOne + levelTwo + levelThree + levelFour + levelFive + levelSix}\r\n                                                                  nodeId={iobObjects[levelOne][levelTwo][levelThree][levelFour][levelFive][levelSix].hasOwnProperty('_id') ? iobObjects[levelOne][levelTwo][levelThree][levelFour][levelFive][levelSix] : levelOne + '.' + levelTwo + '.' + levelThree + '.' + levelFour + '.' +levelFive + '.' + levelSix}\r\n                                                                  labelIcon={AppsIcon}\r\n                                                                  labelIconColor={iobObjects[levelOne][levelTwo][levelThree][levelFour][levelFive][levelSix].hasOwnProperty('_id') ? 'green' : 'red'}\r\n                                                                  labelText={levelSix}\r\n                                                              >\r\n                                                              </StyledTreeItem>))\r\n                                                          }\r\n                                                      </StyledTreeItem>))\r\n                                                  }\r\n                                              </StyledTreeItem>))\r\n                                          }\r\n                                      </StyledTreeItem>))\r\n                                  }\r\n                              </StyledTreeItem>))\r\n                          }\r\n                        </StyledTreeItem>\r\n                    ))\r\n                    }\r\n                </TreeView>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button variant=\"contained\" color=\"primary\" disabled={iobListDialogOKButtonDisabled} onClick={() => handleIobListClick()} iconStart={<IconCheck/>}>Ok</Button>\r\n                <Button variant=\"contained\" onClick={() => setShowIobObjectsDialog(false)} iconStart={<IconCancel/>}>Cancel</Button>\r\n            </DialogActions>\r\n        </Dialog>:\r\n        null;\r\n\r\n    return (\r\n        <Card sx={{minHeight: '100%'}}>\r\n            <CardContent>\r\n                <Grid container direction={\"column\"} spacing={2} >\r\n                    <Grid item>\r\n                        <Typography sx={{fontSize: 14}} color=\"text.secondary\" gutterBottom>\r\n                            {I18n.t('Direct Link states')}\r\n                        </Typography>\r\n                    </Grid>\r\n                </Grid>\r\n                <Grid item>\r\n                    <TextField\r\n                        id=\"standard-read-only-input3\"\r\n                        fullWidth\r\n                        label={gaObj && gaObj.native && gaObj.native.hasOwnProperty('linkedState') && gaObj.native.linkedState.length > 0 ? I18n.t('linked with :') : I18n.t('no non-knx ioBroker state linked')}\r\n                        value={gaObj && gaObj.native && gaObj.native.hasOwnProperty('linkedState') && gaObj.native.linkedState.length > 0 ? gaObj.native.linkedState : ''}\r\n                        InputProps={{\r\n                            readOnly: true,\r\n                        }}\r\n                        variant=\"standard\"\r\n                    />\r\n                </Grid>\r\n            </CardContent>\r\n            <CardActionArea>\r\n                <CardActions>\r\n                    {gaObj && gaObj.native &&\r\n                        ((gaObj.native.hasOwnProperty('linkedState') && gaObj.native.linkedState.length === 0) ||\r\n                            !gaObj.native.hasOwnProperty('linkedState')) &&\r\n                    <Button variant=\"contained\"\r\n                             disabled={!gaObj.hasOwnProperty('_id')}\r\n                             onClick={() => handleAddStateClick()}\r\n                             iconStart={<BuildIcon/>}>\r\n                        {I18n.t('add')}\r\n                    </Button>\r\n                    }\r\n                    {gaObj && gaObj.native &&\r\n                    (gaObj.native.hasOwnProperty('linkedState') && gaObj.native.linkedState.length > 0)  &&\r\n                    <Button variant=\"contained\"\r\n                            disabled={!gaObj.hasOwnProperty('_id')}\r\n                            onClick={() => handleDeleteStateClick()}\r\n                            iconStart={<BuildIcon/>}>\r\n                        {I18n.t('delete')}\r\n                    </Button>\r\n                    }\r\n                </CardActions>\r\n            </CardActionArea>\r\n            {iobObjectBrowser}\r\n            {showMessage}\r\n        </Card>\r\n    )\r\n}\r\n\r\nGaLinkedState.propTypes = {\r\n    props: PropTypes.object,\r\n    onClick: PropTypes.func\r\n};\r\n\r\nexport default GaLinkedState;\r\n","/*\r\n    GaTools is Base and calls :\r\n        - GaList\r\n        - GaProps\r\n        - GaStateAct\r\n */\r\n\r\nimport React, {useEffect, useState} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\n\r\nimport GaStateAct from '../Components/GaStateAct';\r\nimport GaList from '../Components/GaList';\r\nimport GaProps from '../Components/GaProps';\r\nimport {Box, Card, CardContent, Dialog, DialogActions, DialogContent, DialogTitle, Paper} from \"@material-ui/core\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport IconCancel from \"@material-ui/icons/Cancel\";\r\nimport {makeStyles} from \"@material-ui/core/styles\";\r\nimport GaLinkedState from \"../Components/GaLinkedState\";\r\n\r\nconst styles = makeStyles(theme => ({\r\n    root: {\r\n        margin: 0,\r\n        padding: theme.spacing(2)\r\n    },\r\n}))\r\n\r\nfunction createData(gaObj) {\r\n    const ga = Object.entries(gaObj);\r\n    let struct = [];\r\n    let gaRefIdMap = [];\r\n    let gaGaIdMap = [];\r\n    let gaActStateMap = [];\r\n    let gaStateActMap = [];\r\n    let gaUndefMap = [];\r\n\r\n    ga.forEach(gt => {\r\n        if (gt[1]) {\r\n            const g = gt[1];\r\n            if (g && g.native && g.native.address) {\r\n                const adr = g.native.address.split('/');\r\n                const nameSplit = gt[0].split('.');\r\n                if (!struct[adr[0]]) {\r\n                    struct[adr[0]] = {hgName: nameSplit[2], hgId: adr[0], mg: []};\r\n                }\r\n                if (struct[adr[0]]) {\r\n                    if (!struct[adr[0]].mg[adr[1]]) {\r\n                        struct[adr[0]].mg[adr[1]] = {mgName: nameSplit[3], mgId: adr[1], ga: []}\r\n                    }\r\n                }\r\n                if (struct[adr[0]] && struct[adr[0]].mg[adr[1]]) {\r\n                    struct[adr[0]].mg[adr[1]].ga[adr[2]] = {gaId: adr[2], gaName: g.common.name, props: {g}}\r\n                    gaRefIdMap[g.native.addressRefId] = g._id;\r\n                    gaGaIdMap[g._id] = g.native.addressRefId;\r\n\r\n                    // this is a State\r\n                    if (g.native.actGARefId && g.native.actGARefId.length > 0) {\r\n                        gaStateActMap[g._id] = g.native.actGARefId;\r\n                    }\r\n\r\n                    // this is a Act\r\n                    if (g.native.statusGARefId && g.native.statusGARefId.length > 0) {\r\n                        gaActStateMap[g._id] = g.native.statusGARefId;\r\n                    }\r\n\r\n                    // this is undef because no dpt\r\n                    if (g.native.dpt && g.native.dpt.length === 0) {\r\n                        gaUndefMap[g._id] = g.native.addressRefId;\r\n                    }\r\n\r\n                    // this is undef because no read or write\r\n                    if (!g.common.write || !g.common.read) {\r\n                        gaUndefMap[g._id] = g.native.addressRefId;\r\n                    }\r\n\r\n                    // this is undef because neither write nor read are set\r\n                    if (g.common.read && g.common.read.length === 0 && g.common.write && g.common.write.length === 0) {\r\n                        gaUndefMap[g._id] = g.native.addressRefId;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n    return {\r\n        struct: struct,\r\n        gaRefIdMap: gaRefIdMap,\r\n        gaGaIdMap: gaGaIdMap,\r\n        gaActStateMap: gaActStateMap,\r\n        gaStateActMap: gaStateActMap,\r\n        gaUndefMap: gaUndefMap\r\n    }\r\n}\r\n\r\nconst getGaObject = (socket, adapterName, instance) => {\r\n    return socket.getForeignObjects(adapterName + '.' + instance + '.*')\r\n        .then(res => createData(res));\r\n}\r\n\r\nconst getDPTObj = (socket, adapterName, instance) => {\r\n    return socket.sendTo(adapterName + '.' + instance, 'getDPT', null);\r\n}\r\n\r\nfunction GaTools(props) {\r\n\r\n    const dptTempl = {\r\n        id: ''\r\n    };\r\n\r\n    const classes = styles();\r\n\r\n    const {socket, adapterName, instance, instanceAlive} = props;\r\n\r\n    const [gaObjects, setGaObjects] = useState([]);\r\n    const [gaObj, setGaObj] = useState({});\r\n    const [actObj, setActObj] = useState({});\r\n    const [stateObj, setStateObj] = useState({});\r\n    const [dptObj, setDPTObj] = useState(dptTempl);\r\n    const [refIdMap, setRefIdMap] = useState([]);\r\n    const [gaObjArr, setGaObjArr] = useState([]);\r\n    const [messageText, setMessageText] = useState('');\r\n\r\n    //ComponentDidMount=>> bei 1. rendern\r\n    useEffect(() => {\r\n        getGaObject(socket, adapterName, instance)\r\n            .then(gaObj => {\r\n                setGaObjects(gaObj.struct);\r\n                setRefIdMap(gaObj.gaRefIdMap);\r\n\r\n// 2Do: Fr Multiselect: nderung von Read und write darf nicht mglich sein wenn gaRefId in actRefId oder StateRefId.\r\n            });\r\n        getDPTs();\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [socket]);\r\n\r\n    useEffect(() => {\r\n        if (gaObjArr.length === 1) {\r\n            syncGAActState(gaObjArr[0]);\r\n        }\r\n    }, [gaObjArr])\r\n\r\n    useEffect(() => {\r\n        // syncGAActState(gaObj);\r\n    }, [gaObj]);\r\n\r\n\r\n    const handleClick = e => {\r\n        switch (e.id) {\r\n            case 'gaList' :\r\n                if (Array.isArray(e.value)) {\r\n                    let cnt = 0;\r\n                    setGaObjArr([]);\r\n                    let tArr = [];\r\n                    e.value.map(ga => {\r\n                        socket.getObject(ga)\r\n                            .then(obj => {\r\n                                if (obj !== null) {\r\n                                    tArr.push(obj)\r\n                                }\r\n                                if (cnt === e.value.length - 1) {\r\n                                    setGaObjArr(tArr);\r\n                                }\r\n                                cnt++;\r\n                                return\r\n                            })\r\n                        return null;\r\n                    })\r\n                }\r\n                break;\r\n            case 'gaProps' :\r\n                if (e.gaObj) {\r\n                    syncGAActState(e.gaObj);\r\n                }\r\n                if (e.actObj) {\r\n\r\n                }\r\n                if (e.stateObj) {\r\n\r\n                }\r\n                if (e.gaObjArr) {\r\n                    let deniedObjNameArr = [];\r\n                    for (let _cnt = 0; _cnt < e.gaObjArr.length; _cnt++) {\r\n                        let _tArr = e.gaObjArr[_cnt];\r\n                        if (e.gaObjArr.length > 1 && _tArr.native && _tArr.native.hasOwnProperty('actGARefId') && _tArr.native.actGARefId.length > 0) {\r\n                            deniedObjNameArr.push(_tArr.common.name);\r\n                            //setMessageText(I18n.t('Changing this GA is not possible, because it has a existing Act-State relation. ' + _tArr.common.name));\r\n                        }\r\n                        if (e.gaObjArr.length > 1 && _tArr.native && _tArr.native.hasOwnProperty('statusGARefId') && _tArr.native.statusGARefId.length > 0) {\r\n                            deniedObjNameArr.push(_tArr.common.name);\r\n                            //setMessageText(I18n.t('Changing this GA is not possible, because it has a existing Act-State relation. ' + _tArr.common.name));\r\n                        }\r\n                        if (_tArr.native &&\r\n                            _tArr.native.hasOwnProperty('actGARefId') && _tArr.native.actGARefId.length === 0 &&\r\n                            _tArr.native.hasOwnProperty('statusGARefId') && _tArr.native.statusGARefId.length === 0) {\r\n                            syncGAActState(_tArr);\r\n                        }\r\n                        {\r\n                            deniedObjNameArr.length > 0 &&\r\n                            setMessageText(I18n.t('Changing this GA is not possible, because they have existing Act-State relations.  ') +\r\n                                deniedObjNameArr.map((gaName, index) =>\r\n                                    gaName\r\n                                )\r\n                            )\r\n                        }\r\n                    }\r\n                }\r\n                break;\r\n            case 'gaStateAct' :\r\n                if (e.actId) {\r\n                    socket.getObject(e.actId)\r\n                        .then(res => {\r\n                            // setActObj(res);\r\n                            addGAActState(res);\r\n                        })\r\n                }\r\n                if (e.stateId) {\r\n                    socket.getObject(e.stateId)\r\n                        .then(res => {\r\n                            //setStateObj(res);\r\n                            addGAActState(res);\r\n                        })\r\n                }\r\n                if (e.delete) {\r\n                    deleteGAActState(e.delete);\r\n                }\r\n                break;\r\n            case 'linkedState':\r\n                if (e.linkedState){\r\n                    modifyGALinkedState(e.linkedState);\r\n                }\r\n                break;\r\n            default :\r\n                return null;\r\n        }\r\n    }\r\n\r\n    const handlePropsChange = e => {\r\n        if (e.attr && e.value) {\r\n            props.onChange(e.attr, e.value);\r\n        }\r\n    }\r\n\r\n    const getDPTs = () => {\r\n        getDPTObj(socket, adapterName, instance)\r\n            .then(res => setDPTObj(res))\r\n    }\r\n\r\n    const modifyGALinkedState = obj => {\r\n        socket.setObject(obj._id, obj);\r\n        setGaObjArr([obj]);\r\n    }\r\n\r\n    const addGAActState = obj => {\r\n        if (gaObjArr && gaObjArr[0] && gaObjArr[0].native && gaObjArr[0].common && obj && obj.common && obj.native) {\r\n            if (gaObjArr[0].common.hasOwnProperty('read') &&\r\n                gaObjArr[0].common.hasOwnProperty('write') &&\r\n                obj.common.hasOwnProperty('read') &&\r\n                obj.common.hasOwnProperty('write')\r\n            ) {\r\n                // muss geprft werden auf rw => w oder r=>r oder w=>w wegen update-Flag\r\n                if (((!gaObjArr[0].common.write && gaObjArr[0].common.read && obj.common.write && obj.common.read) ||\r\n                    (gaObjArr[0].common.write && gaObjArr[0].common.read && !obj.common.write && obj.common.read) ||\r\n                    !(gaObjArr[0].common.read === obj.common.read || gaObjArr[0].common.write === obj.common.write) ||\r\n                    (gaObjArr[0].common.write && !gaObjArr[0].common.read && obj.common.write && obj.common.read) ||\r\n                    (gaObjArr[0].common.write && gaObjArr[0].common.read && obj.common.write && !obj.common.read))) {\r\n                    if (gaObjArr[0].native.hasOwnProperty('dpt') &&\r\n                        obj.native.hasOwnProperty('dpt') &&\r\n                        gaObjArr[0].native.dpt === obj.native.dpt\r\n                    ) {\r\n                        if (gaObjArr[0].native.statusGARefId.length === 0 &&\r\n                            gaObjArr[0].native.actGARefId.length === 0 &&\r\n                            obj.native.actGARefId.length === 0 &&\r\n                            obj.native.statusGARefId.length === 0\r\n                        ) {\r\n                            if (gaObjArr[0].native.statusGARefId.length === 0 && obj.common.write && !obj.common.read) {\r\n                                gaObjArr[0].native.actGARefId = obj.native.addressRefId;\r\n                                obj.native.statusGARefId = gaObjArr[0].native.addressRefId;\r\n                            } else if (gaObjArr[0].native.actGARefId.length === 0) {\r\n                                gaObjArr[0].native.statusGARefId = obj.native.addressRefId;\r\n                                obj.native.actGARefId = gaObjArr[0].native.addressRefId;\r\n                            }\r\n                            socket.setObject(gaObjArr[0]._id, gaObjArr[0]);\r\n                            socket.setObject(obj._id, obj);\r\n                            syncGAActState(gaObjArr[0]);\r\n                        } else {\r\n                            setMessageText(I18n.t('The target has already a relation. Delete the target relation first before create a new one. It is connected to ' + gaObjArr[0].common.name));\r\n                        }\r\n                    } else {\r\n                        setMessageText(I18n.t('It is not possible to combine State GA and Act GA with different datapointtypes.'));\r\n                    }\r\n                } else {\r\n                    setMessageText(I18n.t('It is not possible to combine state-state nor act-act GAs. Check the GA Properties.'));\r\n                }\r\n            } else {\r\n                setMessageText(I18n.t('One of State or Act (or both) doesn\\'t have defined as read or writeable. Set this property for Act and State GA'));\r\n            }\r\n        }\r\n    }\r\n\r\n    const deleteGAActState = objArr => {\r\n        socket.setObject(objArr[0]._id, objArr[0]);\r\n        socket.setObject(objArr[1]._id, objArr[1]);\r\n        if (objArr[0]._id === gaObjArr[0]._id) {\r\n            syncGAActState(objArr[0]);\r\n        } else {\r\n            syncGAActState(objArr[1]);\r\n        }\r\n    }\r\n\r\n    /*\r\n    2Do: DPT Abgleich zwischen Act und State\r\n     */\r\n\r\n\r\n    const updateDPT = (objID, dpt) => {\r\n        let tdpt = dpt.replace('DPT', '');\r\n        socket.getObject(objID)\r\n            .then(res => {\r\n                if (res.hasOwnProperty('native') && res.native.hasOwnProperty('dpt')){\r\n                    if (res.native.dpt !== dpt) {\r\n                        res.common['type'] = dptObj[tdpt].type;\r\n                        res.common['unit'] = dptObj[tdpt].unit;\r\n                        res.common['max'] = dptObj[tdpt].range.max;\r\n                        res.common['min'] = dptObj[tdpt].range.min;\r\n                        res.native['dpt'] = dpt;\r\n                        socket.setObject(objID, res);\r\n                    }\r\n                }\r\n            })\r\n    }\r\n\r\n    const syncGAActState = obj => {\r\n        if (obj && obj._id && obj.native && obj.native.hasOwnProperty('actGARefId') && obj.native.hasOwnProperty('statusGARefId') && obj.common.hasOwnProperty('read') && obj.common.hasOwnProperty('write')) {\r\n            if (!obj.common.read && obj.common.write) {\r\n                // this obj is act\r\n                if (obj.native.statusGARefId.length > 0 || obj.native.actGARefId.length > 0) {\r\n\r\n                    if (obj.native.actGARefId.length > 0) {\r\n                        // the act Obj can't have a actRefId !\r\n                        obj.native['statusGARefId'] = obj.native.actGARefId;\r\n                        obj.native['actGARefId'] = '';\r\n                        socket.setObject(obj._id, obj);\r\n                    }\r\n                    // check if statusObj is configured properly\r\n                    socket.getObject(refIdMap[obj.native.statusGARefId])\r\n                        .then(statObj => {\r\n                            let modified = false;\r\n                            if (statObj.common && statObj.native) {\r\n                                if (statObj.common['read'] !== true){\r\n                                    statObj.common['read'] = true;\r\n                                    modified = true;\r\n                                }\r\n                                if (statObj.native['actGARefId'] !== obj.native.addressRefId){\r\n                                    statObj.native['actGARefId'] = obj.native.addressRefId;\r\n                                    modified = true;\r\n                                }\r\n                                if (statObj.native['statusGARefId'] !== ''){\r\n                                    statObj.native['statusGARefId'] = '';\r\n                                    modified = true;\r\n                                }\r\n                                if (modified) {\r\n                                    socket.setObject(statObj._id, statObj);\r\n\r\n                                }\r\n                            }\r\n                            setActObj(obj);\r\n                            setStateObj(statObj)\r\n                            if (statObj.native && statObj.native.hasOwnProperty('dpt')) {\r\n                                updateDPT(statObj._id, obj.native.dpt);\r\n                            }\r\n                        })\r\n                } else {\r\n                    // in case if stateGA AND actGA are empty\r\n                    socket.setObject(obj._id, obj);\r\n                    setStateObj({});\r\n                }\r\n                if (obj.native && obj.native.hasOwnProperty('dpt')) {\r\n                    updateDPT(obj._id, obj.native.dpt);\r\n                }\r\n                setGaObj(obj);\r\n                setActObj(obj);\r\n            } else if ((obj.common.read && !obj.common.write) || (obj.common.read && obj.common.write)) {\r\n                // this obj is state\r\n                if (obj.native.statusGARefId.length > 0 || obj.native.actGARefId.length > 0) {\r\n\r\n                    if (obj.native.statusGARefId.length > 0) {\r\n                        // the state Obj can't have a stateRefId !\r\n                        obj.native['actGARefId'] = obj.native.statusGARefId;\r\n                        obj.native['statusGARefId'] = '';\r\n                        socket.setObject(obj._id, obj);\r\n                    }\r\n                    // check if statusObj is configured properly\r\n                    socket.getObject(refIdMap[obj.native.actGARefId])\r\n                        .then(actObj => {\r\n                            if (actObj.common && actObj.native) {\r\n                                let modified = false;\r\n                                if (actObj.common['read'] !== false){\r\n                                    actObj.common['read'] = false;\r\n                                    modified = true;\r\n                                }\r\n                                if (actObj.common['write'] !== true){\r\n                                    actObj.common['write'] = true;\r\n                                    modified = true;\r\n                                }\r\n                                if (actObj.native['statusGARefId'] !== obj.native.addressRefId){\r\n                                    actObj.native['statusGARefId'] = obj.native.addressRefId;\r\n                                    modified = true;\r\n                                }\r\n                                if (actObj.native['actGARefId'] !== ''){\r\n                                    actObj.native['actGARefId'] = '';\r\n                                    modified = true;\r\n                                }\r\n                                if (modified) {\r\n                                    socket.setObject(actObj._id, actObj);\r\n                                    if (actObj.native && actObj.native.hasOwnProperty('dpt')) {\r\n                                        updateDPT(actObj._id, obj.native.dpt);\r\n                                    }\r\n                                }\r\n                            }\r\n                            setStateObj(obj);\r\n                            setActObj(actObj);\r\n                        })\r\n                } else {\r\n                    // in case if stateGA AND actGA are empty\r\n                    socket.setObject(obj._id, obj);\r\n                    setActObj({});\r\n                }\r\n                setGaObj(obj);\r\n                setStateObj(obj);\r\n            }\r\n            if (obj.native && obj.native.hasOwnProperty('dpt')) {\r\n                updateDPT(obj._id, obj.native.dpt);\r\n            }\r\n        } else {\r\n            setActObj({});\r\n            setStateObj({});\r\n        }\r\n    }\r\n\r\n    const showMessage = messageText.length > 0 ?\r\n        <Dialog open={true}>\r\n            <DialogTitle className={classes.root}>\r\n                {I18n.t('Information')}\r\n            </DialogTitle>\r\n            <DialogContent>\r\n                {I18n.t(messageText)}\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button variant=\"contained\" onClick={() => setMessageText('')} iconStart={<IconCancel/>}>Cancel</Button>\r\n            </DialogActions>\r\n        </Dialog> :\r\n        null\r\n\r\n    return <Box sx={{\r\n        p: 2,\r\n        bgcolor: 'background.default',\r\n        display: 'grid',\r\n        gridTemplateColumns: {md: '1.5fr 2fr 1fr'},\r\n        gap: 2,\r\n        height: '95%',\r\n    }}>\r\n        <Paper style={{maxHeight: '100%', overflow: 'auto'}}>\r\n            <Card sx={{minHeight: '100%'}}>\r\n                <CardContent>\r\n                    <Typography sx={{fontSize: 14}} color=\"text.secondary\" gutterBottom>\r\n                        {I18n.t('GA-structure')}\r\n                    </Typography>\r\n                    <GaList key={'galist'} multiselect={true} gaObjects={gaObjects} onClick={e => handleClick(e)}/>\r\n                </CardContent>\r\n            </Card>\r\n        </Paper>\r\n        <Paper>\r\n\r\n        </Paper>\r\n        <Paper>\r\n            {instanceAlive &&\r\n            <GaProps gaObjArr={gaObjArr}\r\n                     dptObjs={dptObj}\r\n                     onClick={e => handleClick(e)}\r\n                     onChange={e => handlePropsChange(e)}\r\n                     props={props}\r\n            />}\r\n            {instanceAlive &&\r\n            <GaStateAct gaObjArr={gaObjArr}\r\n                        actObject={actObj}\r\n                        gaObjects={gaObjects}\r\n                        stateObject={stateObj}\r\n                        gaRefIdMap={refIdMap}\r\n                        socket={socket}\r\n                        onClick={e => handleClick(e)}\r\n            />}\r\n            {instanceAlive &&\r\n                <GaLinkedState\r\n                    socket={socket}\r\n                    gaObjArr={gaObjArr}\r\n                    onClick={e => handleClick(e)}\r\n                />}\r\n        </Paper>\r\n        {showMessage}\r\n    </Box>;\r\n}\r\n\r\nGaTools.propTypes = {\r\n    common: PropTypes.object.isRequired,\r\n    native: PropTypes.object.isRequired,\r\n    instance: PropTypes.number.isRequired,\r\n    adapterName: PropTypes.string.isRequired,\r\n    onError: PropTypes.func,\r\n    onLoad: PropTypes.func,\r\n    onChange: PropTypes.func,\r\n    socket: PropTypes.object.isRequired,\r\n    onShowError: PropTypes.func,\r\n    props: PropTypes.object\r\n};\r\n\r\nexport default GaTools;","import React from 'react';\r\nimport {withStyles} from '@material-ui/core/styles';\r\nimport { MuiThemeProvider } from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport GenericApp from '@iobroker/adapter-react/GenericApp';\r\nimport Loader from '@iobroker/adapter-react/Components/Loader';\r\n\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport TabConfiguration from './Tabs/Configuration'\r\nimport TabGaTools from './Tabs/GaTools';\r\n\r\n//import theme from \"@iobroker/adapter-react/Theme\";\r\n\r\nconst styles = theme => ({\r\n    root: {},\r\n    tabContent: {\r\n        padding: 10,\r\n        height: 'calc(100% - 64px - 48px - 20px)',\r\n        overflow: 'auto'\r\n    },\r\n    tabContentIFrame: {\r\n        padding: 10,\r\n        height: 'calc(100% - 64px - 48px - 20px - 38px)',\r\n        overflow: 'auto'\r\n    }\r\n});\r\n\r\nclass App extends GenericApp {\r\n    constructor(props) {\r\n        const extendedProps = {...props};\r\n        extendedProps.encryptedFields = ['pass'];\r\n        extendedProps.translations = {\r\n            'en': require('./i18n/en'),\r\n            'de': require('./i18n/de'),\r\n            'ru': require('./i18n/ru'),\r\n            'pt': require('./i18n/pt'),\r\n            'nl': require('./i18n/nl'),\r\n            'fr': require('./i18n/fr'),\r\n            'it': require('./i18n/it'),\r\n            'es': require('./i18n/es'),\r\n            'pl': require('./i18n/pl'),\r\n            'zh-cn': require('./i18n/zh-cn')\r\n        };\r\n        super(props, extendedProps);\r\n\r\n        this.updateAliveState = this.updateAliveState.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.setState({\r\n            licenseValid : false,\r\n            selectedTab: 'configuration',\r\n            socketConnected : false\r\n        });\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.socket.unsubscribeState(`system.adapter.${this.adapterName}.${this.instance}.alive`, this.updateAliveState);\r\n    }\r\n\r\n    updateAliveState(id, newState){\r\n        // Changing state\r\n        if (newState && newState.hasOwnProperty('val') && id.includes('alive')) {\r\n            this.setState({\r\n                instanceAlive: newState.val,\r\n                selectedTab : newState.val ? this.state.selectedTab : 'configuration'\r\n            });\r\n            //this.selectTab('configuration', 0);\r\n        }\r\n    }\r\n\r\n    onConnectionReady() {\r\n        // requests available if socket connection persists\r\n        this.setState({\r\n            socketConnected : true\r\n        });\r\n\r\n        this.socket.getObject('system.meta.uuid')\r\n            .then(res => {\r\n                this.setState({hostUUID : res && res.native && res.native.uuid && res.native.uuid.length > 0 ? res.native.uuid : ''});\r\n            })\r\n            .catch(err => {\r\n                this.setState({hostUUID : ''});\r\n            });\r\n\r\n        this.socket.getState(`system.adapter.${this.adapterName}.${this.instance}.alive`)\r\n            .then(res => {\r\n                this.state.instanceAlive = res;\r\n                return res;\r\n            })\r\n            .catch(err =>{\r\n                return false;\r\n            });\r\n\r\n        this.socket.subscribeState(`system.adapter.${this.adapterName}.${this.instance}.alive`, true, this.updateAliveState);\r\n    }\r\n\r\n    updateNativeValue(attr, value, cb) {\r\n        if (attr === 'validLicense'){\r\n            this.setState({licenseValid : value});\r\n        } else {\r\n            super.updateNativeValue(attr, value, cb);\r\n        }\r\n    }\r\n\r\n    getSelectedTab() {\r\n        const tab = this.state.selectedTab;\r\n        if (!tab || tab === 'configuration') {\r\n            return 0;\r\n        } else\r\n        if (tab === 'gatools') {\r\n            return 1;\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n        if (!this.state.loaded || !this.state.socketConnected ) {\r\n            return <MuiThemeProvider theme={this.state.theme}>\r\n                <Loader theme={this.state.themeType}  />\r\n            </MuiThemeProvider>;\r\n        }\r\n\r\n        return <MuiThemeProvider theme={this.state.theme}>\r\n            <div className=\"App\" style={{background: this.state.theme.palette.background.default, color: this.state.theme.palette.text.primary}}>\r\n                <AppBar position=\"static\">\r\n                    <Tabs value={this.getSelectedTab()} onChange={(e, index) => this.selectTab(e.target.parentNode.dataset.name, index)} scrollButtons=\"auto\">\r\n                        <Tab label={I18n.t('Configuration')} data-name=\"configuration\" />\r\n                        {this.state.licenseValid && this.state.instanceAlive  &&\r\n                            <Tab label={I18n.t('GA-Tools')} data-name=\"gatools\" />\r\n                        }\r\n                    </Tabs>\r\n                </AppBar>\r\n\r\n                <div className={this.isIFrame ? this.props.classes.tabContentIFrame : this.props.classes.tabContent} style={{width: '100%'}}>\r\n                    {(this.state.selectedTab === 'configuration' || !this.state.selectedTab) &&\r\n                        <TabConfiguration\r\n                            key=\"configuration\"\r\n                            common={this.common}\r\n                            socket={this.socket}\r\n                            native={this.state.native}\r\n                            onError={text => this.setState({errorText: (text || text === 0) && typeof text !== 'string' ? text.toString() : text})}\r\n                            onLoad={native => this.onLoadConfig(native)}\r\n                            instance={this.instance}\r\n                            adapterName={this.adapterName}\r\n                            instanceAlive={this.state.instanceAlive}\r\n                            changed={this.state.changed}\r\n                            theme={this.state.theme}\r\n                            hostUUID={this.state.hostUUID}\r\n                            onChange={(attr, value, cb) => this.updateNativeValue(attr, value, cb)}\r\n                        />\r\n                    }\r\n                    {this.state.selectedTab === 'gatools' && this.state.licenseValid && this.state.instanceAlive &&\r\n                        <TabGaTools\r\n                            key=\"gatools\"\r\n                            common={this.common}\r\n                            socket={this.socket}\r\n                            native={this.state.native}\r\n                            onError={text => this.setState({errorText: (text || text === 0) && typeof text !== 'string' ? text.toString() : text})}\r\n                            instance={this.instance}\r\n                            instanceAlive={this.state.instanceAlive}\r\n                            adapterName={this.adapterName}\r\n                            onShowError={error => this.showError(error)}\r\n                        />\r\n                    }\r\n                </div>\r\n                {this.renderError()}\r\n                {this.renderSaveCloseButtons()}\r\n            </div>\r\n        </MuiThemeProvider>;\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(App);\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport * as Sentry from '@sentry/browser';\r\nimport * as SentryIntegrations from '@sentry/integrations';\r\nimport { MuiThemeProvider} from '@material-ui/core/styles';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport {version} from '../package.json';\r\nimport theme from '@iobroker/adapter-react/Theme';\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\n\r\nwindow.adapterName = 'knx';\r\nlet themeName = Utils.getThemeName();\r\n\r\nconsole.log('iobroker.' + window.adapterName + '@' + version + ' using theme \"' + themeName + '\"');\r\n\r\nfunction build() {\r\n    return ReactDOM.render(\r\n        <MuiThemeProvider theme={theme(themeName)}>\r\n            <App\r\n                onThemeChange={_theme => {\r\n                    themeName = _theme;\r\n                    build();\r\n                }}\r\n            />\r\n        </MuiThemeProvider>,\r\n        document.getElementById('root')\r\n    );\r\n}\r\n\r\nif (window.location.host !== 'localhost:3000') {\r\n    Sentry.init({\r\n        dsn: 'https://beb3d0c9d1e741e39a103ef992066c0b@sentry.iobroker.net/163',\r\n        release: 'iobroker.' + window.adapterName + '@' + version,\r\n        integrations: [\r\n            new SentryIntegrations.Dedupe()\r\n        ]\r\n    });\r\n}\r\n\r\nbuild();\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}